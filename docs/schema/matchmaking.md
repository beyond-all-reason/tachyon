<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Matchmaking

The matchmaking cycle works as follows:

1. Clients should first retrieve a list of all the available queues from the server using [list](#list).
2. Clients should then queue for one or more of these queues by sending an array of the queue ids in a [queue](#queue) request. Before joining the queue, the client needs to download all required assets to make sure that `ready` can be send instantly.
3. The server can send periodic updates about the status of the search as a [queueUpdate](#queueupdate) event.
4. When a match is found, the server should send a [found](#found) event along with the id of the queue of the found match.
5. Clients can then ready up by sending a [ready](#ready) request. The number of readied players should be sent to clients via the [foundUpdate](#foundupdate) event.
6. To cancel queueing, or to decline a found match, clients should send a [cancel](#cancel) request. After a successful `cancel` response, the server will also send a [cancelled](#cancelled) event.
7. If a client fails to ready up for a found match, the server should send a [lost](#lost) event, and the queueing phase should resume.
8. Once all players are ready, the server should send a [autohost/battleStart](#autohost/battleStart) request to a suitable autohost client. If the autohost doesn't respond quickly, or if it sends a failed response, the server should repeat this step.
9. Once the autohost has successfully started the battle, the server should then send [battle/battleStart](#battle/battleStart) requests to the users.

The server may send [matchmaking/cancelled](#cancelled) event at any point after the client sent a [queue](#queue) request with a reason. This means the client has been booted out the matchmaking system. It can happen for example when a party member leaves, or in case of a server error that needs to reset the matchmaking state, or if list of required assets changed. This event is also sent after a successful [cancel](#cancel) request.

[matchmaking/cancelled](#cancelled) can have the following reasons:
* `intentional`: the player left matchmaking
* `server_error`: something bad happended and the server couldn't maintain
  state so it booted the player out. Retrying may fix the issue.
* `party_user_left`: a member of the player's party left matchmaking, thus
  forcing the entire party to withdraw
* `ready_timeout`: The player failed to accept a match within the given
  time window and is thus removed from the matchmaking system.

When a player is in a party and a member of the party queues for matchmaking, all other member of the party will receive a [matchmaking/queuesJoined](#queuesJoined) event to let them know they are now in queue. This event is not sent to the player who originally joined the queues.

---
- [cancel](#cancel)
- [cancelled](#cancelled)
- [found](#found)
- [foundUpdate](#foundupdate)
- [list](#list)
- [lost](#lost)
- [queue](#queue)
- [queueUpdate](#queueupdate)
- [queuesJoined](#queuesjoined)
- [ready](#ready)
---

## Cancel

Cancel queueing for matchmaking.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/cancel/request.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingCancelRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/cancel" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "minim nisi id",
    "commandId": "matchmaking/cancel"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingCancelRequest {
    type: "request";
    messageId: string;
    commandId: "matchmaking/cancel";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/cancel/response.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingCancelResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "MatchmakingCancelOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/cancel" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "MatchmakingCancelFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/cancel" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_queued",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "consectetur laboris elit aute esse",
    "commandId": "matchmaking/cancel",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingCancelOkResponse {
    type: "response";
    messageId: string;
    commandId: "matchmaking/cancel";
    status: "success";
}
```
Possible Failed Reasons: `not_queued`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Cancelled

Server may send this event at any point when the user is queuing to indicate that the user has been booted out the matchmaking system.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/cancelled/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingCancelledEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/cancelled" },
        "data": {
            "title": "MatchmakingCancelledEventData",
            "type": "object",
            "properties": {
                "reason": {
                    "enum": [
                        "intentional",
                        "server_error",
                        "party_user_left",
                        "ready_timeout",
                        "version_changed"
                    ]
                }
            },
            "required": ["reason"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "dolore Ut magna et",
    "commandId": "matchmaking/cancelled",
    "data": {
        "reason": "server_error"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingCancelledEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/cancelled";
    data: MatchmakingCancelledEventData;
}
export interface MatchmakingCancelledEventData {
    reason: "intentional" | "server_error" | "party_user_left" | "ready_timeout" | "version_changed";
}
```
---

## Found

Server should send this when there are enough queued players to form a valid battle that meets their criteria. Clients should then send [ready](#ready).

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/found/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingFoundEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/found" },
        "data": {
            "title": "MatchmakingFoundEventData",
            "type": "object",
            "properties": {
                "queueId": { "type": "string" },
                "timeoutMs": { "type": "integer" }
            },
            "required": ["queueId", "timeoutMs"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "Ut",
    "commandId": "matchmaking/found",
    "data": {
        "queueId": "non nostrud",
        "timeoutMs": -90412510
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingFoundEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/found";
    data: MatchmakingFoundEventData;
}
export interface MatchmakingFoundEventData {
    queueId: string;
    timeoutMs: number;
}
```
---

## FoundUpdate

Server should send this when players ready up using [ready](#ready).

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/foundUpdate/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingFoundUpdateEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/foundUpdate" },
        "data": {
            "title": "MatchmakingFoundUpdateEventData",
            "type": "object",
            "properties": { "readyCount": { "type": "integer" } },
            "required": ["readyCount"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "in Excepteur eu pariatur",
    "commandId": "matchmaking/foundUpdate",
    "data": {
        "readyCount": -60855496
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingFoundUpdateEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/foundUpdate";
    data: MatchmakingFoundUpdateEventData;
}
export interface MatchmakingFoundUpdateEventData {
    readyCount: number;
}
```
---

## List

Returns all available matchmaking playlists.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/list/request.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/list" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Excepteur minim ea",
    "commandId": "matchmaking/list"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingListRequest {
    type: "request";
    messageId: string;
    commandId: "matchmaking/list";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/list/response.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "MatchmakingListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/list" },
                "status": { "const": "success" },
                "data": {
                    "title": "MatchmakingListOkResponseData",
                    "type": "object",
                    "properties": {
                        "playlists": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "id": { "type": "string" },
                                    "version": {
                                        "description": "Opaque version string that uniquely identifies the properties of the queue with this id, including list of required assets versions",
                                        "type": "string"
                                    },
                                    "name": { "type": "string" },
                                    "numOfTeams": { "type": "integer" },
                                    "teamSize": { "type": "integer" },
                                    "ranked": { "type": "boolean" },
                                    "engines": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "version": { "type": "string" }
                                            },
                                            "required": ["version"]
                                        }
                                    },
                                    "games": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "springName": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": ["springName"]
                                        }
                                    },
                                    "maps": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "springName": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": ["springName"]
                                        }
                                    }
                                },
                                "required": [
                                    "id",
                                    "version",
                                    "name",
                                    "numOfTeams",
                                    "teamSize",
                                    "ranked",
                                    "engines",
                                    "games",
                                    "maps"
                                ]
                            }
                        }
                    },
                    "required": ["playlists"],
                    "examples": [
                        {
                            "playlists": [
                                {
                                    "id": "1v1",
                                    "version": "27n6cr76nyfqic73647c1328c94",
                                    "name": "Duel",
                                    "numOfTeams": 2,
                                    "teamSize": 1,
                                    "ranked": true,
                                    "engines": [{ "version": "2025.01.6" }],
                                    "games": [
                                        {
                                            "springName": "Beyond All Reason test-27414-a84d7e6"
                                        }
                                    ],
                                    "maps": [
                                        { "springName": "Theta Crystals 1.3" },
                                        {
                                            "springName": "Comet Catcher Remake 1.8"
                                        },
                                        { "springName": "Aurelia v4.1" }
                                    ]
                                },
                                {
                                    "id": "1v1v1",
                                    "name": "3 Way FFA",
                                    "numOfTeams": 3,
                                    "teamSize": 1,
                                    "ranked": true,
                                    "engines": [{ "version": "2025.01.6" }],
                                    "games": [
                                        {
                                            "springName": "Beyond All Reason test-27414-a84d7e6"
                                        }
                                    ],
                                    "maps": [
                                        { "springName": "Ghenna Rising 4.0.1" }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "MatchmakingListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/list" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "nisi deserunt",
    "commandId": "matchmaking/list",
    "status": "success",
    "data": {
        "playlists": [
            {
                "id": "1v1",
                "version": "27n6cr76nyfqic73647c1328c94",
                "name": "Duel",
                "numOfTeams": 2,
                "teamSize": 1,
                "ranked": true,
                "engines": [
                    {
                        "version": "2025.01.6"
                    }
                ],
                "games": [
                    {
                        "springName": "Beyond All Reason test-27414-a84d7e6"
                    }
                ],
                "maps": [
                    {
                        "springName": "Theta Crystals 1.3"
                    },
                    {
                        "springName": "Comet Catcher Remake 1.8"
                    },
                    {
                        "springName": "Aurelia v4.1"
                    }
                ]
            },
            {
                "id": "1v1v1",
                "name": "3 Way FFA",
                "numOfTeams": 3,
                "teamSize": 1,
                "ranked": true,
                "engines": [
                    {
                        "version": "2025.01.6"
                    }
                ],
                "games": [
                    {
                        "springName": "Beyond All Reason test-27414-a84d7e6"
                    }
                ],
                "maps": [
                    {
                        "springName": "Ghenna Rising 4.0.1"
                    }
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingListOkResponse {
    type: "response";
    messageId: string;
    commandId: "matchmaking/list";
    status: "success";
    data: MatchmakingListOkResponseData;
}
export interface MatchmakingListOkResponseData {
    playlists: {
        id: string;
        version: string;
        name: string;
        numOfTeams: number;
        teamSize: number;
        ranked: boolean;
        engines: {
            version: string;
        }[];
        games: {
            springName: string;
        }[];
        maps: {
            springName: string;
        }[];
    }[];
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Lost

Sent when a found match gets disbanded because a client failed to ready up.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/lost/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingLostEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/lost" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "voluptate esse laborum dolore et",
    "commandId": "matchmaking/lost"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingLostEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/lost";
}
```
---

## Queue

Queue up for matchmaking. Should cancel the previous queue if already in one.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/queue/request.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingQueueRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/queue" },
        "data": {
            "title": "MatchmakingQueueRequestData",
            "type": "object",
            "properties": {
                "queues": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id": { "type": "string" },
                            "version": { "type": "string" }
                        },
                        "required": ["id", "version"]
                    },
                    "minItems": 1
                }
            },
            "required": ["queues"],
            "examples": [
                {
                    "queues": [
                        {
                            "id": "1v1",
                            "version": "27n6cr76nyfqic73647c1328c94"
                        }
                    ]
                }
            ]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolore cillum proident qui",
    "commandId": "matchmaking/queue",
    "data": {
        "queues": [
            {
                "id": "1v1",
                "version": "27n6cr76nyfqic73647c1328c94"
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingQueueRequest {
    type: "request";
    messageId: string;
    commandId: "matchmaking/queue";
    data: MatchmakingQueueRequestData;
}
export interface MatchmakingQueueRequestData {
    queues: [
        {
            id: string;
            version: string;
        },
        ...{
            id: string;
            version: string;
        }[]
    ];
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/queue/response.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingQueueResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "MatchmakingQueueOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/queue" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "MatchmakingQueueFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/queue" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "invalid_queue_specified",
                        "already_queued",
                        "already_in_battle",
                        "version_mismatch",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "proident tempor",
    "commandId": "matchmaking/queue",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingQueueOkResponse {
    type: "response";
    messageId: string;
    commandId: "matchmaking/queue";
    status: "success";
}
```
Possible Failed Reasons: `invalid_queue_specified`, `already_queued`, `already_in_battle`, `version_mismatch`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## QueueUpdate

Contains some info about the state of the current queue.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/queueUpdate/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingQueueUpdateEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/queueUpdate" },
        "data": {
            "title": "MatchmakingQueueUpdateEventData",
            "type": "object",
            "properties": { "playersQueued": { "type": "integer" } },
            "required": ["playersQueued"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "voluptate amet nostrud culpa enim",
    "commandId": "matchmaking/queueUpdate",
    "data": {
        "playersQueued": 87917257
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingQueueUpdateEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/queueUpdate";
    data: MatchmakingQueueUpdateEventData;
}
export interface MatchmakingQueueUpdateEventData {
    playersQueued: number;
}
```
---

## QueuesJoined

Indicate the player has been added to some queues by someone else. This happens in a party settings.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/queuesJoined/event.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingQueuesJoinedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/queuesJoined" },
        "data": {
            "title": "MatchmakingQueuesJoinedEventData",
            "type": "object",
            "properties": {
                "queues": {
                    "type": "array",
                    "items": { "type": "string" },
                    "minItems": 1
                }
            },
            "required": ["queues"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "culpa tempor labore cillum",
    "commandId": "matchmaking/queuesJoined",
    "data": {
        "queues": [
            "magna enim ex adipisicing",
            "tempor consectetur adipisicing",
            "in Duis",
            "et nostrud ipsum",
            "do laboris magna"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingQueuesJoinedEvent {
    type: "event";
    messageId: string;
    commandId: "matchmaking/queuesJoined";
    data: MatchmakingQueuesJoinedEventData;
}
export interface MatchmakingQueuesJoinedEventData {
    queues: [string, ...string[]];
}
```
---

## Ready

Clients should send this when they are ready to proceed with the found match. If not sent within 10s of the [found](#found) response then queue should be cancelled.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/ready/request.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingReadyRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "matchmaking/ready" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Ut",
    "commandId": "matchmaking/ready"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingReadyRequest {
    type: "request";
    messageId: string;
    commandId: "matchmaking/ready";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "https://schema.beyondallreason.dev/tachyon/matchmaking/ready/response.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MatchmakingReadyResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "MatchmakingReadyOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/ready" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "MatchmakingReadyFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "matchmaking/ready" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "no_match",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "non",
    "commandId": "matchmaking/ready",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface MatchmakingReadyOkResponse {
    type: "response";
    messageId: string;
    commandId: "matchmaking/ready";
    status: "success";
}
```
Possible Failed Reasons: `no_match`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

