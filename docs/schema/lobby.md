<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Lobby

# Lobby

A lobby is a place where players can chat and setup a game before going into it.
A player can only be in at most one lobby at a time.


## Updates with JSON patch

For updates, we are using json merge patch [RFC 7386](https://www.rfc-editor.org/rfc/rfc7386.html).
These are used for [lobby/listUpdated](#listUpdated) and [lobby/updated](#updated) events. More
on them below.

An example of json patch:

```json
{
    "teams": {
        "01": {"maxPlayers": 1},
        "02": {"maxPlayers": 2}
    }
}
```
is the representation of
```json
{
    "teams": [{"maxPlayers": 1}, {"maxPlayers": 2}]
}
```

Removing the first team can be represented by the following patch objects (they are equivalent):

```json
{
    "teams": {
        "01": {"maxPlayers": 2},
        "02": null
    }
}

{
    "teams": {
        "01": null
    }
}
```


## Lobby details

[lobby/create](#create) is used to create and join a lobby. When you create a lobby
you also automatically becomes the first player in the first allyTeam.

For other player to join a lobby, they need the lobby ID with [lobby/join](#join),
this operation is idempotent. Attempting to join a different lobby while being
in a lobby will fail with `invalid_request`.

Upon joining, clients receive the full state of the lobby as
response and will automatically get [lobby/updated](#updated) events when
something changes. There is no need to subscribe or unsubscribe to this event,
lobby membership is equivalent to subscription.
This event follow the same json merge patch structure.
As such, arrays like teams are represented using objects, where the items
are ordered based on their keys.

A player can use [lobby/leave](#leave) to leave the lobby, but can also be forcibly removed
from a lobby, in which case they would receive [lobby/left](#left) event. This can
happen when the player is kicked, or if the lobby crashed. In this case, the client should
consider no longer in the lobby. This event is only sent to the player that was removed.
It will not be sent when the client leave using [lobby/leave](#leave).

When a lobby is empty, it is automatically disposed off.


### Lobby members

Joining a lobby puts the user as a spectator.
They can then use [lobby/joinAllyTeam](#joinAllyTeam) to join a specific ally team.
If the target ally team is full, the request fails and nothing happen. `joinAllyTeam` can also be used
to change team. Similarly, if the ally team is full, the request fails and nothing happen.

A member can also choose to join the waiting queue of the lobby with [lobby/joinQueue](#joinQueue). This can be used when all ally teams are full, and/or when the user doesn't care which ally team they should join.
A member in the join queue is represented as a spectator with `{joinQueuePosition: number()}`. The join queue
positions may not be consecutive. The following is possible:

```
spectators: {
    "123": {"id": "123", "joinQueuePosition": 3}
    "456": {"id": "456", "joinQueuePosition": 1}
    "789": {"id": "789", "joinQueuePosition": 10}
}
```

When a suitable ally team has a free spot for a waiting player, the server will automatically put them
in that spot and update its state through [lobby/updated](#updated).
A member simply spectating and not waiting to play will have a null `joinQueuePosition`.
To leave an ally team or the join queue and become a spectator, a user should use [lobby/spectate](#spectate).



## List of all lobbies

Other players can get the list of lobbies through [lobby/subscribeList](#subscribeList). After being
subscribed they receive [lobby/listUpdated](#listUpdated) events.
This allow clients to maintain a list of lobbies on their side.
The event [lobby/listReset](#listReset) holds the full list of lobbies. Upon receiving this
event, a client should set its internal list of lobbies according to this event.
In practice, this event should rarely be seen.

---
- [addBot](#addbot)
- [create](#create)
- [join](#join)
- [joinAllyTeam](#joinallyteam)
- [joinQueue](#joinqueue)
- [leave](#leave)
- [left](#left)
- [listReset](#listreset)
- [listUpdated](#listupdated)
- [removeBot](#removebot)
- [spectate](#spectate)
- [startBattle](#startbattle)
- [subscribeList](#subscribelist)
- [unsubscribeList](#unsubscribelist)
- [updateBot](#updatebot)
- [updated](#updated)
---

## AddBot

Add a bot to the specified ally team

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/addBot" },
        "data": {
            "title": "LobbyAddBotRequestData",
            "type": "object",
            "properties": {
                "allyTeam": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "Short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string",
                    "maxLength": 20
                },
                "version": { "type": "string" },
                "options": {
                    "type": "object",
                    "patternProperties": { "^(.*)$": { "type": "string" } }
                }
            },
            "required": ["allyTeam", "shortName"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor aute ea in",
    "commandId": "lobby/addBot",
    "data": {
        "allyTeam": "laborum voluptate",
        "name": "fugiat",
        "shortName": "au",
        "version": "magna veniam sed",
        "options": {
            "8wOU!a": "aliquip",
            "": "magna dolore eu",
            "2K": "irure"
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/addBot";
    data: LobbyAddBotRequestData;
}
export interface LobbyAddBotRequestData {
    allyTeam: string;
    name?: string;
    shortName: string;
    version?: string;
    options?: {
        [k: string]: string;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyAddBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "success" },
                "data": {
                    "title": "LobbyAddBotOkResponseData",
                    "type": "object",
                    "properties": {
                        "id": {
                            "description": "The id the server generated for this bot",
                            "type": "string"
                        }
                    },
                    "required": ["id"]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyAddBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "nisi ut commodo",
    "commandId": "lobby/addBot",
    "status": "success",
    "data": {
        "id": "in"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/addBot";
    status: "success";
    data: LobbyAddBotOkResponseData;
}
export interface LobbyAddBotOkResponseData {
    id: string;
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Create

Create a lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/create" },
        "data": {
            "title": "LobbyCreateRequestData",
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "mapName": { "type": "string" },
                "allyTeamConfig": {
                    "description": "each object describes an ally team",
                    "type": "array",
                    "items": {
                        "description": "config for this ally team",
                        "type": "object",
                        "properties": {
                            "maxTeams": { "type": "integer", "minimum": 1 },
                            "startBox": { "$ref": "#/definitions/startBox" },
                            "teams": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "maxPlayers": {
                                            "type": "integer",
                                            "minimum": 1
                                        }
                                    },
                                    "required": ["maxPlayers"]
                                }
                            }
                        },
                        "required": ["maxTeams", "startBox", "teams"]
                    }
                }
            },
            "required": ["name", "mapName", "allyTeamConfig"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "exercitation",
    "commandId": "lobby/create",
    "data": {
        "name": "fugiat id aute",
        "mapName": "labore consequat tempor adipisicing ullamco",
        "allyTeamConfig": []
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyCreateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/create";
    data: LobbyCreateRequestData;
}
export interface LobbyCreateRequestData {
    name: string;
    mapName: string;
    allyTeamConfig: {
        maxTeams: number;
        startBox: StartBox;
        teams: {
            maxPlayers: number;
        }[];
    }[];
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyCreateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyCreateOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyCreateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate in",
    "commandId": "lobby/create",
    "status": "success",
    "data": {
        "id": "velit eu sunt",
        "name": "minim sint aliqua dolor reprehenderit",
        "mapName": "ut",
        "engineVersion": "qui id nisi sed",
        "gameVersion": "pariatur sunt Duis",
        "allyTeamConfig": {
            "hj2": {
                "startBox": {
                    "top": 0.054356932640075684,
                    "bottom": 0.9855321049690247,
                    "left": 0.3289511203765869,
                    "right": 0.16059565544128418
                },
                "maxTeams": 12871945,
                "teams": {
                    "P?{-}&": {
                        "maxPlayers": 98656160
                    },
                    "`y[~1<": {
                        "maxPlayers": 60614247
                    }
                }
            }
        },
        "players": {
            "{BT": {
                "id": "351",
                "allyTeam": "irure ut exercitation minim sit",
                "team": "Ut proident ex dolore aute",
                "player": "in occaecat commodo nisi deserunt"
            },
            "g*~": {
                "id": "351",
                "allyTeam": "deserunt",
                "team": "mollit officia ea",
                "player": "occaecat mollit consectetur Excepteur deserunt"
            },
            "Vt55^^F": {
                "id": "351",
                "allyTeam": "deserunt et in dolor",
                "team": "elit veniam",
                "player": "cillum aliquip"
            },
            ">": {
                "id": "351",
                "allyTeam": "quis proident amet consequat minim",
                "team": "nulla sit in",
                "player": "Duis velit eiusmod anim est"
            }
        },
        "spectators": {
            "=g%TQ": {
                "id": "351",
                "joinQueuePosition": -91048336.02905273
            },
            "QRim": {
                "id": "351",
                "joinQueuePosition": -1201987.2665405273
            },
            "X<[Qjj]O^I": {
                "id": "351"
            }
        },
        "bots": {
            "M-@fAM": {
                "id": "in",
                "hostUserId": "351",
                "allyTeam": "et minim voluptate in culpa",
                "team": "laboris ipsum dolore enim ut",
                "player": "est in enim",
                "name": "commo",
                "shortName": "occaeca",
                "version": "dolor culpa",
                "options": {
                    "Fx_K8": "reprehenderit magna eu occaecat id",
                    "": "velit nisi officia irure",
                    "c+": "voluptate do nisi",
                    "I2'b!lI ": "in aute anim et proident"
                }
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;

export interface LobbyCreateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/create";
    status: "success";
    data: LobbyCreateOkResponseData;
}
export interface LobbyCreateOkResponseData {
    id: string;
    name: string;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Join

Join a lobby. On success, get the lobby state and will receive updated events as long as player is in lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/join" },
        "data": {
            "title": "LobbyJoinRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "veniam",
    "commandId": "lobby/join",
    "data": {
        "id": "est irure mollit"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/join";
    data: LobbyJoinRequestData;
}
export interface LobbyJoinRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyJoinOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyJoinFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "lobby_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ea ullamco dolore nostrud in",
    "commandId": "lobby/join",
    "status": "success",
    "data": {
        "id": "commodo Duis dolore consequat",
        "name": "id ex occaecat exercitation",
        "mapName": "adipisicing reprehenderit ipsum",
        "engineVersion": "nisi",
        "gameVersion": "amet",
        "allyTeamConfig": {
            "W |:KuOk/x": {
                "startBox": {
                    "top": 0.369232177734375,
                    "bottom": 0.9725453853607178,
                    "left": 0.46052515506744385,
                    "right": 0.9408383369445801
                },
                "maxTeams": 19888574,
                "teams": {
                    "*1j6/#\\": {
                        "maxPlayers": 93780059
                    },
                    "|Tg": {
                        "maxPlayers": 62605191
                    },
                    "=W1": {
                        "maxPlayers": 38869948
                    },
                    "[l.kg|.?": {
                        "maxPlayers": 11333126
                    },
                    "": {
                        "maxPlayers": 85529680
                    },
                    ",!?5'c": {
                        "maxPlayers": 71038718
                    }
                }
            },
            "roho": {
                "startBox": {
                    "top": 0.7876737117767334,
                    "bottom": 0.6124547719955444,
                    "left": 0.16075611114501953,
                    "right": 0.6785145401954651
                },
                "maxTeams": 9858573,
                "teams": {
                    "p$V'o%8'": {
                        "maxPlayers": 40755708
                    },
                    "d": {
                        "maxPlayers": 95084745
                    }
                }
            },
            "u}": {
                "startBox": {
                    "top": 0.19229495525360107,
                    "bottom": 0.7104532122612,
                    "left": 0.7016656994819641,
                    "right": 0.272929310798645
                },
                "maxTeams": 91175366,
                "teams": {
                    "": {
                        "maxPlayers": 80739517
                    },
                    "_#G.{": {
                        "maxPlayers": 18993098
                    },
                    "~!PP%W": {
                        "maxPlayers": 28960121
                    }
                }
            }
        },
        "players": {
            "2b": {
                "id": "351",
                "allyTeam": "Duis tempor non ad",
                "team": "anim in",
                "player": "cupidatat"
            }
        },
        "spectators": {
            "R~c/=rGp": {
                "id": "351",
                "joinQueuePosition": 17248785.495758057
            },
            "": {
                "id": "351",
                "joinQueuePosition": -81065165.99655151
            },
            "f+": {
                "id": "351",
                "joinQueuePosition": -55711638.92745972
            },
            "'~cRGw>+": {
                "id": "351"
            }
        },
        "bots": {
            "/.j": {
                "id": "exercitation tempor ad",
                "hostUserId": "351",
                "allyTeam": "consectetur sint",
                "team": "aliquip",
                "player": "deserunt",
                "name": "consectetur",
                "shortName": "in in ",
                "version": "reprehenderit"
            },
            "l!L": {
                "id": "Lorem est",
                "hostUserId": "351",
                "allyTeam": "dolore laboris non aliquip ex",
                "team": "cillum",
                "player": "nostrud",
                "shortName": "irure",
                "version": "anim id ad"
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;

export interface LobbyJoinOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/join";
    status: "success";
    data: LobbyJoinOkResponseData;
}
export interface LobbyJoinOkResponseData {
    id: string;
    name: string;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `lobby_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinAllyTeam

Joins the given ally team in an empty team.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinAllyTeam" },
        "data": {
            "title": "LobbyJoinAllyTeamRequestData",
            "type": "object",
            "properties": { "allyTeam": { "type": "string" } },
            "required": ["allyTeam"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim deserunt do",
    "commandId": "lobby/joinAllyTeam",
    "data": {
        "allyTeam": "Excepteur est officia"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    data: LobbyJoinAllyTeamRequestData;
}
export interface LobbyJoinAllyTeamRequestData {
    allyTeam: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinAllyTeamOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinAllyTeamFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "tempor elit eiusmod",
    "commandId": "lobby/joinAllyTeam",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinQueue

Joins the waiting queue to play. The server will automatically put the user in the first suitable ally team when the time comes.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinQueue" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "reprehenderit Duis exercitation id",
    "commandId": "lobby/joinQueue"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinQueue";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinQueueOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinQueueFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "fugiat quis aliqua",
    "commandId": "lobby/joinQueue",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinQueue";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Leave

Leave the lobby, also unsubscribe from any update

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/leave" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi exercitation",
    "commandId": "lobby/leave"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/leave";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyLeaveOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyLeaveFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ad amet est",
    "commandId": "lobby/leave",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/leave";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Left

Sent by the server when the player is removed from the lobby. Can be kicked/ban or the lobby crashed

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeftEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/left" },
        "data": {
            "title": "LobbyLeftEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "reason": { "type": "string" }
            },
            "required": ["id", "reason"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "est",
    "commandId": "lobby/left",
    "data": {
        "id": "et pariatur proident",
        "reason": "voluptate quis consectetur"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeftEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/left";
    data: LobbyLeftEventData;
}
export interface LobbyLeftEventData {
    id: string;
    reason: string;
}
```
---

## ListReset

Sent by the server to give the client the full list of all lobbies

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListResetEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listReset" },
        "data": {
            "title": "LobbyListResetEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": { "$ref": "#/definitions/lobbyOverview" }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "sint",
    "commandId": "lobby/listReset",
    "data": {
        "lobbies": {
            "JH+": {
                "id": "nulla eiusmod",
                "name": "ad ullamco sunt ipsum proident",
                "playerCount": 26791585,
                "maxPlayerCount": -87375796,
                "mapName": "amet proident non elit",
                "engineVersion": "in nostrud",
                "gameVersion": "ullamco esse cillum enim",
                "currentBattle": null
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;

export interface LobbyListResetEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listReset";
    data: LobbyListResetEventData;
}
export interface LobbyListResetEventData {
    lobbies: {
        [k: string]: LobbyOverview;
    };
}
export interface LobbyOverview {
    id: string;
    name: string;
    playerCount: number;
    maxPlayerCount: number;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    currentBattle: {
        startedAt: UnixTime;
    } | null;
}
```
---

## ListUpdated

Sent by the server whenever some lobbies are added, removed or modified.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listUpdated" },
        "data": {
            "title": "LobbyListUpdatedEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "name": { "type": "string" },
                                        "playerCount": { "type": "integer" },
                                        "maxPlayerCount": { "type": "integer" },
                                        "mapName": { "type": "string" },
                                        "engineVersion": { "type": "string" },
                                        "gameVersion": { "type": "string" },
                                        "currentBattle": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "startedAt": {
                                                            "$ref": "#/definitions/unixTime"
                                                        }
                                                    },
                                                    "required": ["startedAt"]
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "in dolore",
    "commandId": "lobby/listUpdated",
    "data": {
        "lobbies": {
            "^-S:": {
                "id": "incididunt consectetur dolor",
                "name": "ex sed anim",
                "playerCount": 7251906,
                "maxPlayerCount": -89825213,
                "mapName": "id pariatur tempor ullamco",
                "engineVersion": "magna",
                "currentBattle": null
            },
            "N <": {
                "id": "proident quis",
                "gameVersion": "adipisicing ipsum aute officia"
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;

export interface LobbyListUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listUpdated";
    data: LobbyListUpdatedEventData;
}
export interface LobbyListUpdatedEventData {
    lobbies: {
        [k: string]: {
            id: string;
            name?: string;
            playerCount?: number;
            maxPlayerCount?: number;
            mapName?: string;
            engineVersion?: string;
            gameVersion?: string;
            currentBattle?: {
                startedAt: UnixTime;
            } | null;
        } | null;
    };
}
```
---

## RemoveBot

Remove the specified bot from the lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/removeBot" },
        "data": {
            "title": "LobbyRemoveBotRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sed Lorem",
    "commandId": "lobby/removeBot",
    "data": {
        "id": "Excepteur esse exercitation incididunt"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/removeBot";
    data: LobbyRemoveBotRequestData;
}
export interface LobbyRemoveBotRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyRemoveBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyRemoveBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "esse eiusmod",
    "commandId": "lobby/removeBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/removeBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Spectate

Move the client to the spectator queue. If already in spectator queue, has no effect (but still succeed).

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/spectate" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ut pariatur",
    "commandId": "lobby/spectate"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/spectate";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySpectateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySpectateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "mollit id",
    "commandId": "lobby/spectate",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/spectate";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## StartBattle

Start the battle for the lobby. If this request succeed players will receive a battle/start request.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/startBattle" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi ut ullamco sint",
    "commandId": "lobby/startBattle"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/startBattle";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyStartBattleOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyStartBattleFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "occaecat id in do nostrud",
    "commandId": "lobby/startBattle",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/startBattle";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SubscribeList

Ask the server to send updates about lobby list. Idempotent, subscribing multiple time has no effect.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/subscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "incididunt deserunt ullamco culpa nulla",
    "commandId": "lobby/subscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/subscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "non",
    "commandId": "lobby/subscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/subscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UnsubscribeList

Ask the server to stop sending updates about lobby list. Idempotent, if not subscribed, will still succeed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/unsubscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Duis dolor esse",
    "commandId": "lobby/unsubscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/unsubscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUnsubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUnsubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "reprehenderit",
    "commandId": "lobby/unsubscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/unsubscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UpdateBot

Change a bot properties. Some properties like ID and allyTeam can't be changed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updateBot" },
        "data": {
            "title": "LobbyUpdateBotRequestData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string"
                },
                "version": {
                    "anyOf": [{ "type": "string" }, { "type": "null" }]
                },
                "options": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [{ "type": "string" }, { "type": "null" }]
                        }
                    }
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor veniam amet",
    "commandId": "lobby/updateBot",
    "data": {
        "id": "Duis proident adipisicing",
        "name": "commodo",
        "shortName": "exercitation elit",
        "version": "do esse irure culpa",
        "options": {
            "D(Rt$sQ4J": null,
            "[+[K`k": null,
            "h_\"%rV7e": "ad dolore in enim",
            ",j$$^@": null
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/updateBot";
    data: LobbyUpdateBotRequestData;
}
export interface LobbyUpdateBotRequestData {
    id: string;
    name?: string;
    shortName?: string;
    version?: string | null;
    options?: {
        [k: string]: string | null;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate elit culpa occaecat",
    "commandId": "lobby/updateBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/updateBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Updated

Sent by the server whenever something in the lobby changes. Uses json patch (RFC-7386)

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updated" },
        "data": {
            "title": "LobbyUpdatedEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "mapName": { "type": "string" },
                "engineVersion": { "type": "string" },
                "gameVersion": { "type": "string" },
                "allyTeams": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "description": "this represent an array, items should be sorted lexicographically on their keys",
                                    "type": "object",
                                    "properties": {
                                        "startBox": {
                                            "$ref": "#/definitions/startBox"
                                        },
                                        "maxTeams": {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        "teams": {
                                            "type": "object",
                                            "patternProperties": {
                                                "^(.*)$": {
                                                    "anyOf": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "maxPlayers": {
                                                                    "type": "integer",
                                                                    "minimum": 1
                                                                }
                                                            }
                                                        },
                                                        { "type": "null" }
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    "required": ["teams"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "players": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "spectators": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "joinQueuePosition": {
                                            "anyOf": [
                                                { "type": "number" },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "bots": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" },
                                        "name": {
                                            "anyOf": [
                                                {
                                                    "description": "name to display in the lobby",
                                                    "type": "string"
                                                },
                                                { "type": "null" }
                                            ]
                                        },
                                        "shortName": {
                                            "description": "Short name of the bot. Used to uniquely identify which bot to run",
                                            "type": "string"
                                        },
                                        "version": {
                                            "anyOf": [
                                                { "type": "string" },
                                                { "type": "null" }
                                            ]
                                        },
                                        "options": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "patternProperties": {
                                                        "^(.*)$": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id", "version", "options"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "currentBattle": {
                    "anyOf": [
                        {
                            "description": "If a battle is currently happening, here are the info",
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "startedAt": {
                                    "$ref": "#/definitions/unixTime"
                                }
                            },
                            "required": ["id", "startedAt"]
                        },
                        { "type": "null" }
                    ]
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "laboris ipsum ea ut sit",
    "commandId": "lobby/updated",
    "data": {
        "id": "adipisicing officia eiusmod in dolore",
        "name": "Excepteur magna amet commodo velit",
        "mapName": "Duis nostrud dolore dolor ut",
        "allyTeams": {
            "W8m3D": {
                "startBox": {
                    "top": 0.38843363523483276,
                    "bottom": 0.7097047567367554,
                    "left": 0.26567769050598145,
                    "right": 0.029768764972686768
                },
                "maxTeams": 79185772,
                "teams": {
                    "E[Sva": null,
                    "Nf!z?+*Tc": {
                        "nisi4cd": "dolore",
                        "dolore_e95": -18286658,
                        "voluptate880": 10259258,
                        "ipsum_3de": "qui esse dolor Excepteur",
                        "maxPlayers": 32589031
                    },
                    "\\|8P \\C=Kl": null,
                    ")": {
                        "cillum_7b": false,
                        "aute_": -76915443,
                        "cupidatatb1": -76946818.82858276,
                        "exa4": "veniam",
                        "maxPlayers": 15148336
                    }
                }
            },
            "": null,
            "9x2X:\\": null,
            "7D": {
                "startBox": {
                    "top": 0.22380495071411133,
                    "bottom": 0.3090400695800781,
                    "left": 0.42553818225860596,
                    "right": 0.9208085536956787
                },
                "teams": {
                    "l": {
                        "enim__f": true,
                        "consectetur_e": -19333387
                    },
                    "+x-K0vzp": {
                        "pariatur_0cb": false,
                        "Excepteur_9e": "ex ut laborum Lorem magna",
                        "maxPlayers": 14232487
                    }
                }
            }
        },
        "currentBattle": null
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;

export interface LobbyUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/updated";
    data: LobbyUpdatedEventData;
}
export interface LobbyUpdatedEventData {
    id: string;
    name?: string;
    mapName?: string;
    engineVersion?: string;
    gameVersion?: string;
    allyTeams?: {
        [k: string]: {
            startBox?: StartBox;
            maxTeams?: number;
            teams: {
                [k: string]: {
                    maxPlayers?: number;
                } | null;
            };
        } | null;
    };
    players?: {
        [k: string]: {
            id: UserId;
            allyTeam?: string;
            team?: string;
            player?: string;
        } | null;
    };
    spectators?: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number | null;
        } | null;
    };
    bots?: {
        [k: string]: {
            id: string;
            allyTeam?: string;
            team?: string;
            player?: string;
            name?: string | null;
            shortName?: string;
            version: string | null;
            options: {
                [k: string]: string | null;
            } | null;
        } | null;
    };
    currentBattle?: {
        id: string;
        startedAt: UnixTime;
    } | null;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
