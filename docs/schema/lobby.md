<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Lobby

# Lobby

A lobby is a place where players can chat and setup a game before going into it.
A player can only be in at most one lobby at a time.


## Updates with JSON patch

For updates, we are using json merge patch [RFC 7386](https://www.rfc-editor.org/rfc/rfc7386.html).
These are used for [lobby/listUpdated](#listUpdated) and [lobby/updated](#updated) events. More
on them below.

An example of json patch:

```json
{
    "teams": {
        "01": {"maxPlayers": 1},
        "02": {"maxPlayers": 2}
    }
}
```
is the representation of
```json
{
    "teams": [{"maxPlayers": 1}, {"maxPlayers": 2}]
}
```

Removing the first team can be represented by the following patch objects (they are equivalent):

```json
{
    "teams": {
        "01": {"maxPlayers": 2},
        "02": null
    }
}

{
    "teams": {
        "01": null
    }
}
```


## Lobby details

[lobby/create](#create) is used to create and join a lobby. When you create a lobby
you also automatically becomes the first player in the first allyTeam.

For other player to join a lobby, they need the lobby ID with [lobby/join](#join),
this operation is idempotent. Attempting to join a different lobby while being
in a lobby will fail with `invalid_request`.

Upon joining, clients receive the full state of the lobby as
response and will automatically get [lobby/updated](#updated) events when
something changes. There is no need to subscribe or unsubscribe to this event,
lobby membership is equivalent to subscription.
This event follow the same json merge patch structure.
As such, arrays like teams are represented using objects, where the items
are ordered based on their keys.

A player can use [lobby/leave](#leave) to leave the lobby, but can also be forcibly removed
from a lobby, in which case they would receive [lobby/left](#left) event. This can
happen when the player is kicked, or if the lobby crashed. In this case, the client should
consider no longer in the lobby. This event is only sent to the player that was removed.
It will not be sent when the client leave using [lobby/leave](#leave).

When a lobby is empty, it is automatically disposed off.


### Lobby members

Joining a lobby puts the user as a spectator.
They can then use [lobby/joinAllyTeam](#joinAllyTeam) to join a specific ally team.
If the target ally team is full, the request fails and nothing happen. `joinAllyTeam` can also be used
to change team. Similarly, if the ally team is full, the request fails and nothing happen.

A member can also choose to join the waiting queue of the lobby with [lobby/joinQueue](#joinQueue). This can be used when all ally teams are full, and/or when the user doesn't care which ally team they should join.
A member in the join queue is represented as a spectator with `{joinQueuePosition: number()}`. The join queue
positions may not be consecutive. The following is possible:

```
spectators: {
    "123": {"id": "123", "joinQueuePosition": 3}
    "456": {"id": "456", "joinQueuePosition": 1}
    "789": {"id": "789", "joinQueuePosition": 10}
}
```

When a suitable ally team has a free spot for a waiting player, the server will automatically put them
in that spot and update its state through [lobby/updated](#updated).
A member simply spectating and not waiting to play will have a null `joinQueuePosition`.
To leave an ally team or the join queue and become a spectator, a user should use [lobby/spectate](#spectate).

Clients can send a [lobby/updateClientStatus](#updateClientStatus) request to notify others if they are ready
and if they need to download some assets, like engine, map or game. When a user becomes a player (at lobby creation,
through `joinAllyTeam` or with the join queue), the server will automatically assign them a default status
`{"isReady": false, "assetStatus": "ready"}`. If this is incorrect the client should send a request to correct it.


### Lobby updates

Any member can update most (any?) property of the lobby. Updates are all or nothing, if updating a proprety
is not possible (invalid or forbidden), then no update take place.
The result of the updates is then transmitted to all members via [lobby/updated](#updated) events.

When an operation requires a vote, the vote data is also transmitted with [lobby/updated](#updated) events.
And when the vote ends, a [lobby/voteEnded][#voteEnded] event is sent to all lobby members. This is to simplify
client logic if they want to show a notification in addition to the updated state.

## List of all lobbies

Other players can get the list of lobbies through [lobby/subscribeList](#subscribeList). After being
subscribed they receive [lobby/listUpdated](#listUpdated) events.
This allow clients to maintain a list of lobbies on their side.
The event [lobby/listReset](#listReset) holds the full list of lobbies. Upon receiving this
event, a client should set its internal list of lobbies according to this event.
In practice, this event should rarely be seen.

---
- [addBot](#addbot)
- [create](#create)
- [join](#join)
- [joinAllyTeam](#joinallyteam)
- [joinQueue](#joinqueue)
- [leave](#leave)
- [left](#left)
- [listReset](#listreset)
- [listUpdated](#listupdated)
- [removeBot](#removebot)
- [spectate](#spectate)
- [startBattle](#startbattle)
- [subscribeList](#subscribelist)
- [unsubscribeList](#unsubscribelist)
- [update](#update)
- [updateBot](#updatebot)
- [updateClientStatus](#updateclientstatus)
- [updated](#updated)
- [voteEnded](#voteended)
- [voteSubmit](#votesubmit)
---

## AddBot

Add a bot to the specified ally team

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/addBot" },
        "data": {
            "title": "LobbyAddBotRequestData",
            "type": "object",
            "properties": {
                "allyTeam": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "Short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string",
                    "maxLength": 20
                },
                "version": { "type": "string" },
                "options": {
                    "type": "object",
                    "patternProperties": { "^(.*)$": { "type": "string" } }
                }
            },
            "required": ["allyTeam", "shortName"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor aute ea in",
    "commandId": "lobby/addBot",
    "data": {
        "allyTeam": "laborum voluptate",
        "name": "fugiat",
        "shortName": "au",
        "version": "magna veniam sed",
        "options": {
            "8wOU!a": "aliquip",
            "": "magna dolore eu",
            "2K": "irure"
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/addBot";
    data: LobbyAddBotRequestData;
}
export interface LobbyAddBotRequestData {
    allyTeam: string;
    name?: string;
    shortName: string;
    version?: string;
    options?: {
        [k: string]: string;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyAddBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "success" },
                "data": {
                    "title": "LobbyAddBotOkResponseData",
                    "type": "object",
                    "properties": {
                        "id": {
                            "description": "The id the server generated for this bot",
                            "type": "string"
                        }
                    },
                    "required": ["id"]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyAddBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "nisi ut commodo",
    "commandId": "lobby/addBot",
    "status": "success",
    "data": {
        "id": "in"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/addBot";
    status: "success";
    data: LobbyAddBotOkResponseData;
}
export interface LobbyAddBotOkResponseData {
    id: string;
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Create

Create a lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/create" },
        "data": {
            "title": "LobbyCreateRequestData",
            "type": "object",
            "properties": {
                "name": { "$ref": "#/definitions/lobbyName" },
                "mapName": { "type": "string" },
                "allyTeamConfig": { "$ref": "#/definitions/allyTeamConfig" }
            },
            "required": ["name", "mapName", "allyTeamConfig"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "exercitation",
    "commandId": "lobby/create",
    "data": {
        "name": "mollit",
        "mapName": "qui proident reprehenderit nisi in",
        "allyTeamConfig": [
            {
                "maxTeams": 62778390,
                "startBox": {
                    "top": 0.5980529189109802,
                    "bottom": 0.83367520570755,
                    "left": 0.38755643367767334,
                    "right": 0.10872387886047363
                },
                "teams": []
            },
            {
                "maxTeams": 92319859,
                "startBox": {
                    "top": 0.7716678380966187,
                    "bottom": 0.9239792227745056,
                    "left": 0.6328656673431396,
                    "right": 0.492387056350708
                },
                "teams": [
                    {
                        "maxPlayers": 11837841
                    },
                    {
                        "maxPlayers": 65977526
                    },
                    {
                        "maxPlayers": 43295843
                    },
                    {
                        "maxPlayers": 85418952
                    }
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type AllyTeamConfig = {
    maxTeams: number;
    startBox: StartBox;
    teams: {
        maxPlayers: number;
    }[];
}[];

export interface LobbyCreateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/create";
    data: LobbyCreateRequestData;
}
export interface LobbyCreateRequestData {
    name: LobbyName;
    mapName: string;
    allyTeamConfig: AllyTeamConfig;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyCreateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyCreateOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyCreateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate in",
    "commandId": "lobby/create",
    "status": "success",
    "data": {
        "id": "consequat magna aliquip deserunt et",
        "name": "amet",
        "mapName": "sunt enim mollit exercitation",
        "engineVersion": "qui",
        "gameVersion": "Duis in culpa ut",
        "allyTeamConfig": {
            "4": {
                "startBox": {
                    "top": 0.187120258808136,
                    "bottom": 0.2970948815345764,
                    "left": 0.04573178291320801,
                    "right": 0.024774372577667236
                },
                "maxTeams": 98656160,
                "teams": {
                    "": {
                        "maxPlayers": 30205477
                    },
                    "{BT": {
                        "maxPlayers": 30175597
                    },
                    "p>g": {
                        "maxPlayers": 48406166
                    },
                    "bVt55^^F+)": {
                        "maxPlayers": 26918436
                    },
                    "+;O": {
                        "maxPlayers": 10331607
                    },
                    "x\\y>[o#?5s": {
                        "maxPlayers": 83415163
                    }
                }
            },
            "A'": {
                "startBox": {
                    "top": 0.7757041454315186,
                    "bottom": 0.03898346424102783,
                    "left": 0.7520244717597961,
                    "right": 0.5262707471847534
                },
                "maxTeams": 95683778,
                "teams": {
                    "W c*x": {
                        "maxPlayers": 4024011
                    },
                    ";L&": {
                        "maxPlayers": 46036464
                    }
                }
            },
            "?/,QJ_(bEN": {
                "startBox": {
                    "top": 0.6050259470939636,
                    "bottom": 0.5044509768486023,
                    "left": 0.960135817527771,
                    "right": 0.11190241575241089
                },
                "maxTeams": 24455041,
                "teams": {
                    "w\">": {
                        "maxPlayers": 58883858
                    },
                    "cgxNG:": {
                        "maxPlayers": 1635546
                    },
                    "rCx2ZN": {
                        "maxPlayers": 34320158
                    },
                    "\\": {
                        "maxPlayers": 37559498
                    },
                    "[Phwu": {
                        "maxPlayers": 46568019
                    },
                    "z": {
                        "maxPlayers": 47726959
                    }
                }
            },
            "?{-}&": {
                "startBox": {
                    "top": 0.6615306735038757,
                    "bottom": 0.6626094579696655,
                    "left": 0.7840800285339355,
                    "right": 0.6195181608200073
                },
                "maxTeams": 56065918,
                "teams": {
                    "4": {
                        "maxPlayers": 31450665
                    },
                    "K@oa&e": {
                        "maxPlayers": 92785806
                    },
                    "*4\\`+p": {
                        "maxPlayers": 4451746
                    },
                    "'5GkU*j$v": {
                        "maxPlayers": 1820863
                    }
                }
            }
        },
        "players": {
            "m2ShT ": {
                "id": "351",
                "allyTeam": "consectetur laborum",
                "team": "adipisicing veniam dolor sint Duis",
                "player": "dolore veniam"
            },
            "\\\\u": {
                "id": "351",
                "allyTeam": "dolore do",
                "team": "Ut cillum",
                "player": "enim dolor"
            },
            ":": {
                "id": "351",
                "allyTeam": "quis occaecat voluptate",
                "team": "incididunt velit",
                "player": "Excepteur consequat sed nisi fugiat"
            }
        },
        "spectators": {
            "_QnUdeQ": {
                "id": "351",
                "joinQueuePosition": 6009888.648986816
            },
            "g%T": {
                "id": "351",
                "joinQueuePosition": 25771057.60574341
            }
        },
        "bots": {
            "I!39[M$": {
                "id": "ex laboris eu",
                "hostUserId": "351",
                "allyTeam": "culpa",
                "team": "nulla ipsum nostrud nisi dolore",
                "player": "dolor culpa veniam",
                "name": "dolore sun",
                "shortName": "commodo ",
                "version": "in",
                "options": {
                    "cgMFx": "tempor ex labore dolor",
                    "'y": "dolor Excepteur nulla pariatur quis",
                    "c+": "magna amet"
                }
            },
            "2bN?": {
                "id": "sed labore aliqua voluptate exercitation",
                "hostUserId": "351",
                "allyTeam": "esse id ad irure do",
                "team": "commodo tempor magna quis",
                "player": "nulla ad",
                "name": "irure",
                "shortName": "dolo",
                "version": "laboris nisi",
                "options": {
                    "6": "fugiat eiusmod deserunt voluptate"
                }
            },
            "00k! oiJTM": {
                "id": "pariatur commodo voluptate ut ea",
                "hostUserId": "351",
                "allyTeam": "exercitation ad occaecat esse aute",
                "team": "commodo",
                "player": "eu",
                "shortName": "ut in v",
                "version": "ut dolore sit"
            },
            "fAM": {
                "id": "proident quis laboris",
                "hostUserId": "351",
                "allyTeam": "Ut ipsum adipisicing proident exercitation",
                "team": "irure do in",
                "player": "incididunt aliqua mollit in",
                "name": "dolore reprehenderi",
                "shortName": "sint",
                "version": "eu do",
                "options": {
                    "": "nulla laboris ut consectetur",
                    "*'A!Tw:Xy": "quis",
                    "Se+gir": "esse magna culpa velit"
                }
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        },
        "currentVote": {
            "id": "Duis do culpa reprehenderit dolor",
            "action": {
                "type": "start"
            },
            "initiator": "351",
            "voters": {
                "": {
                    "vote": "yes"
                }
            },
            "until": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyCreateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/create";
    status: "success";
    data: LobbyCreateOkResponseData;
}
export interface LobbyCreateOkResponseData {
    id: string;
    name: LobbyName;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
    currentVote?: {
        id: string;
        action: VoteActions;
        initiator: UserId;
        voters: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Join

Join a lobby. On success, get the lobby state and will receive updated events as long as player is in lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/join" },
        "data": {
            "title": "LobbyJoinRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "veniam",
    "commandId": "lobby/join",
    "data": {
        "id": "est irure mollit"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/join";
    data: LobbyJoinRequestData;
}
export interface LobbyJoinRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyJoinOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyJoinFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "lobby_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ea ullamco dolore nostrud in",
    "commandId": "lobby/join",
    "status": "success",
    "data": {
        "id": "aute occaecat",
        "name": "ut sint commodo non",
        "mapName": "aute labore",
        "engineVersion": "fugiat dolore Excepteur sit cillum",
        "gameVersion": "minim nisi pariatur Excepteur aliqua",
        "allyTeamConfig": {
            " |:KuO": {
                "startBox": {
                    "top": 0.9725453853607178,
                    "bottom": 0.46052515506744385,
                    "left": 0.9408383369445801,
                    "right": 0.1988857388496399
                },
                "maxTeams": 80947400,
                "teams": {
                    "\\*1j6/#\\=": {
                        "maxPlayers": 68927748
                    },
                    "i:=W1e[l": {
                        "maxPlayers": 96813477
                    },
                    "k": {
                        "maxPlayers": 85699285
                    },
                    ".?P!U,!?5'": {
                        "maxPlayers": 16075612
                    },
                    "$*yht[^": {
                        "maxPlayers": 9186531
                    },
                    "j#*k": {
                        "maxPlayers": 39220077
                    }
                }
            },
            "CrohoF5u}K": {
                "startBox": {
                    "top": 0.5775054097175598,
                    "bottom": 0.07770544290542603,
                    "left": 0.8342872262001038,
                    "right": 0.06089276075363159
                },
                "maxTeams": 25565076,
                "teams": {
                    "Okz7": {
                        "maxPlayers": 27292932
                    },
                    "ol2": {
                        "maxPlayers": 33711499
                    }
                }
            }
        },
        "players": {
            "#G.{ZT~": {
                "id": "351",
                "allyTeam": "aliquip",
                "team": "amet pariatur",
                "player": "esse ex aute Ut"
            },
            "": {
                "id": "351",
                "allyTeam": "commodo sed",
                "team": "minim consectetur velit",
                "player": "consequat dolore laborum"
            },
            "%Wcql": {
                "id": "351",
                "allyTeam": "nostrud est aliqua",
                "team": "elit cupidatat pariatur",
                "player": "esse"
            },
            "I2\\_;`": {
                "id": "351",
                "allyTeam": "sit ex fugiat labore irure",
                "team": "aliquip in quis do",
                "player": "cupidatat in consectetur ea veniam"
            }
        },
        "spectators": {
            "UXLKdy{'": {
                "id": "351",
                "joinQueuePosition": -92122256.75582886
            },
            "u/": {
                "id": "351",
                "joinQueuePosition": 57308018.20755005
            },
            "<H;`1A$": {
                "id": "351"
            }
        },
        "bots": {
            "P5qH3m": {
                "id": "aliqua voluptate",
                "hostUserId": "351",
                "allyTeam": "nostrud Duis",
                "team": "proident pariatur eiusmod quis ut",
                "player": "labore adipisicing cillum",
                "name": "exercitation dol",
                "shortName": "o",
                "version": "ea est",
                "options": {
                    "": "dolor ad",
                    "W_": "velit incididunt"
                }
            },
            "_xxG": {
                "id": "dolore et proident",
                "hostUserId": "351",
                "allyTeam": "eu dolor labore",
                "team": "mollit id et exercitation",
                "player": "do proident",
                "name": "labore nostrud ad",
                "shortName": "commodo s",
                "version": "proident dolore elit minim eiusmod",
                "options": {
                    "^9]BI3{WM": "tempor ex enim in amet",
                    ",n": "amet proident dolore ut",
                    "Iu": "laboris est mollit"
                }
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        },
        "currentVote": {
            "id": "irure qui eu magna eiusmod",
            "action": {
                "type": "start"
            },
            "initiator": "351",
            "voters": {
                "W0U\\h[oU,d": {
                    "vote": "no"
                },
                "Zy\"*uN#": {
                    "vote": "no"
                }
            },
            "until": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyJoinOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/join";
    status: "success";
    data: LobbyJoinOkResponseData;
}
export interface LobbyJoinOkResponseData {
    id: string;
    name: LobbyName;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
    currentVote?: {
        id: string;
        action: VoteActions;
        initiator: UserId;
        voters: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `lobby_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinAllyTeam

Joins the given ally team in an empty team.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinAllyTeam" },
        "data": {
            "title": "LobbyJoinAllyTeamRequestData",
            "type": "object",
            "properties": { "allyTeam": { "type": "string" } },
            "required": ["allyTeam"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim deserunt do",
    "commandId": "lobby/joinAllyTeam",
    "data": {
        "allyTeam": "Excepteur est officia"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    data: LobbyJoinAllyTeamRequestData;
}
export interface LobbyJoinAllyTeamRequestData {
    allyTeam: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinAllyTeamOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinAllyTeamFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "tempor elit eiusmod",
    "commandId": "lobby/joinAllyTeam",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinQueue

Joins the waiting queue to play. The server will automatically put the user in the first suitable ally team when the time comes.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinQueue" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "reprehenderit Duis exercitation id",
    "commandId": "lobby/joinQueue"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinQueue";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinQueueOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinQueueFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "fugiat quis aliqua",
    "commandId": "lobby/joinQueue",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinQueue";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Leave

Leave the lobby, also unsubscribe from any update

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/leave" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi exercitation",
    "commandId": "lobby/leave"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/leave";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyLeaveOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyLeaveFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ad amet est",
    "commandId": "lobby/leave",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/leave";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Left

Sent by the server when the player is removed from the lobby. Can be kicked/ban or the lobby crashed

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeftEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/left" },
        "data": {
            "title": "LobbyLeftEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "reason": { "type": "string" }
            },
            "required": ["id", "reason"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "est",
    "commandId": "lobby/left",
    "data": {
        "id": "et pariatur proident",
        "reason": "voluptate quis consectetur"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeftEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/left";
    data: LobbyLeftEventData;
}
export interface LobbyLeftEventData {
    id: string;
    reason: string;
}
```
---

## ListReset

Sent by the server to give the client the full list of all lobbies

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListResetEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listReset" },
        "data": {
            "title": "LobbyListResetEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": { "$ref": "#/definitions/lobbyOverview" }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "sint",
    "commandId": "lobby/listReset",
    "data": {
        "lobbies": {
            "JH+": {
                "id": "nisi reprehenderit id sit ea",
                "name": "ipsum minim aliquip",
                "playerCount": -87375796,
                "maxPlayerCount": -40765071,
                "mapName": "consectetur qui sunt proident",
                "engineVersion": "deserunt non veniam",
                "gameVersion": "nostrud ad irure aliquip",
                "currentBattle": null
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type UnixTime = number;

export interface LobbyListResetEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listReset";
    data: LobbyListResetEventData;
}
export interface LobbyListResetEventData {
    lobbies: {
        [k: string]: LobbyOverview;
    };
}
export interface LobbyOverview {
    id: string;
    name: LobbyName;
    playerCount: number;
    maxPlayerCount: number;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    currentBattle: {
        startedAt: UnixTime;
    } | null;
}
```
---

## ListUpdated

Sent by the server whenever some lobbies are added, removed or modified.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listUpdated" },
        "data": {
            "title": "LobbyListUpdatedEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "name": {
                                            "$ref": "#/definitions/lobbyName"
                                        },
                                        "playerCount": { "type": "integer" },
                                        "maxPlayerCount": { "type": "integer" },
                                        "mapName": { "type": "string" },
                                        "engineVersion": { "type": "string" },
                                        "gameVersion": { "type": "string" },
                                        "currentBattle": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "startedAt": {
                                                            "$ref": "#/definitions/unixTime"
                                                        }
                                                    },
                                                    "required": ["startedAt"]
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "in dolore",
    "commandId": "lobby/listUpdated",
    "data": {
        "lobbies": {
            "^-S:": {
                "id": "consectetur elit dolor qui",
                "name": "cillum incididunt dolore",
                "playerCount": -89825213,
                "maxPlayerCount": -7697380,
                "mapName": "nulla tempor officia quis",
                "engineVersion": "enim",
                "currentBattle": {
                    "startedAt": 1705432698000000
                }
            },
            "N <": {
                "id": "fugiat aliqua tempor et",
                "playerCount": -77057696,
                "maxPlayerCount": -1438057,
                "mapName": "dolor dolore ullamco reprehenderit quis",
                "engineVersion": "quis",
                "gameVersion": "dolore in velit Duis sint",
                "currentBattle": {
                    "startedAt": 1705432698000000
                }
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type UnixTime = number;

export interface LobbyListUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listUpdated";
    data: LobbyListUpdatedEventData;
}
export interface LobbyListUpdatedEventData {
    lobbies: {
        [k: string]: {
            id: string;
            name?: LobbyName;
            playerCount?: number;
            maxPlayerCount?: number;
            mapName?: string;
            engineVersion?: string;
            gameVersion?: string;
            currentBattle?: {
                startedAt: UnixTime;
            } | null;
        } | null;
    };
}
```
---

## RemoveBot

Remove the specified bot from the lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/removeBot" },
        "data": {
            "title": "LobbyRemoveBotRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sed Lorem",
    "commandId": "lobby/removeBot",
    "data": {
        "id": "Excepteur esse exercitation incididunt"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/removeBot";
    data: LobbyRemoveBotRequestData;
}
export interface LobbyRemoveBotRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyRemoveBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyRemoveBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "esse eiusmod",
    "commandId": "lobby/removeBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/removeBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Spectate

Move the client to the spectator queue. If already in spectator queue, has no effect (but still succeed).

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/spectate" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ut pariatur",
    "commandId": "lobby/spectate"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/spectate";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySpectateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySpectateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "mollit id",
    "commandId": "lobby/spectate",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/spectate";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## StartBattle

Start the battle for the lobby. If this request succeed players will receive a battle/start request.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/startBattle" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi ut ullamco sint",
    "commandId": "lobby/startBattle"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/startBattle";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyStartBattleOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyStartBattleFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "occaecat id in do nostrud",
    "commandId": "lobby/startBattle",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/startBattle";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SubscribeList

Ask the server to send updates about lobby list. Idempotent, subscribing multiple time has no effect.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/subscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "incididunt deserunt ullamco culpa nulla",
    "commandId": "lobby/subscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/subscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "non",
    "commandId": "lobby/subscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/subscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UnsubscribeList

Ask the server to stop sending updates about lobby list. Idempotent, if not subscribed, will still succeed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/unsubscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Duis dolor esse",
    "commandId": "lobby/unsubscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/unsubscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUnsubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUnsubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "reprehenderit",
    "commandId": "lobby/unsubscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/unsubscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Update

Update some properties of the lobby the player is in.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/update" },
        "data": {
            "title": "LobbyUpdateRequestData",
            "type": "object",
            "properties": {
                "name": { "$ref": "#/definitions/lobbyName" },
                "mapName": { "type": "string" },
                "allyTeamConfig": { "$ref": "#/definitions/allyTeamConfig" }
            }
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ad cillum sed cupidatat",
    "commandId": "lobby/update",
    "data": {
        "in70a": "minim magna eu mollit adipisicing",
        "name": "dolor minim",
        "allyTeamConfig": [
            {
                "maxTeams": 43706489,
                "startBox": {
                    "top": 0.7488753199577332,
                    "bottom": 0.43301111459732056,
                    "left": 0.6073043942451477,
                    "right": 0.10174292325973511
                },
                "teams": [
                    {
                        "maxPlayers": 38316489
                    },
                    {
                        "maxPlayers": 80703903
                    },
                    {
                        "maxPlayers": 94357861
                    },
                    {
                        "maxPlayers": 7467294
                    }
                ]
            },
            {
                "maxTeams": 87368489,
                "startBox": {
                    "top": 0.6210411190986633,
                    "bottom": 0.9499408006668091,
                    "left": 0.12847506999969482,
                    "right": 0.35906654596328735
                },
                "teams": [
                    {
                        "maxPlayers": 19946069
                    },
                    {
                        "maxPlayers": 51369733
                    },
                    {
                        "maxPlayers": 32959527
                    },
                    {
                        "maxPlayers": 3478653
                    },
                    {
                        "maxPlayers": 98462576
                    }
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type AllyTeamConfig = {
    maxTeams: number;
    startBox: StartBox;
    teams: {
        maxPlayers: number;
    }[];
}[];

export interface LobbyUpdateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/update";
    data: LobbyUpdateRequestData;
}
export interface LobbyUpdateRequestData {
    name?: LobbyName;
    mapName?: string;
    allyTeamConfig?: AllyTeamConfig;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/update" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/update" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in Ut ad aute voluptate",
    "commandId": "lobby/update",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/update";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UpdateBot

Change a bot properties. Some properties like ID and allyTeam can't be changed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updateBot" },
        "data": {
            "title": "LobbyUpdateBotRequestData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string"
                },
                "version": {
                    "anyOf": [{ "type": "string" }, { "type": "null" }]
                },
                "options": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [{ "type": "string" }, { "type": "null" }]
                        }
                    }
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor veniam amet",
    "commandId": "lobby/updateBot",
    "data": {
        "id": "Duis proident adipisicing",
        "name": "commodo",
        "shortName": "exercitation elit",
        "version": "do esse irure culpa",
        "options": {
            "D(Rt$sQ4J": null,
            "[+[K`k": null,
            "h_\"%rV7e": "ad dolore in enim",
            ",j$$^@": null
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/updateBot";
    data: LobbyUpdateBotRequestData;
}
export interface LobbyUpdateBotRequestData {
    id: string;
    name?: string;
    shortName?: string;
    version?: string | null;
    options?: {
        [k: string]: string | null;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate elit culpa occaecat",
    "commandId": "lobby/updateBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/updateBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UpdateClientStatus

Update the player's status

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateClientStatusRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updateClientStatus" },
        "data": {
            "title": "LobbyUpdateClientStatusRequestData",
            "type": "object",
            "properties": {
                "isReady": { "type": "boolean" },
                "assetStatus": { "enum": ["missing", "downloading", "ready"] }
            }
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "do",
    "commandId": "lobby/updateClientStatus",
    "data": {
        "isReady": false,
        "assetStatus": "missing"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateClientStatusRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/updateClientStatus";
    data: LobbyUpdateClientStatusRequestData;
}
export interface LobbyUpdateClientStatusRequestData {
    isReady?: boolean;
    assetStatus?: "missing" | "downloading" | "ready";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateClientStatusResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateClientStatusOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateClientStatus" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateClientStatusFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateClientStatus" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "not_a_player",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in esse est cillum irure",
    "commandId": "lobby/updateClientStatus",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateClientStatusOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/updateClientStatus";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `not_a_player`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Updated

Sent by the server whenever something in the lobby changes. Uses json patch (RFC-7386)

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updated" },
        "data": {
            "title": "LobbyUpdatedEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "$ref": "#/definitions/lobbyName" },
                "mapName": { "type": "string" },
                "engineVersion": { "type": "string" },
                "gameVersion": { "type": "string" },
                "allyTeamConfig": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "description": "this represent an array, items should be sorted lexicographically on their keys",
                                    "type": "object",
                                    "properties": {
                                        "startBox": {
                                            "$ref": "#/definitions/startBox"
                                        },
                                        "maxTeams": {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        "teams": {
                                            "type": "object",
                                            "patternProperties": {
                                                "^(.*)$": {
                                                    "anyOf": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "maxPlayers": {
                                                                    "type": "integer",
                                                                    "minimum": 1
                                                                }
                                                            }
                                                        },
                                                        { "type": "null" }
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    "required": ["teams"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "players": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" },
                                        "isReady": { "type": "boolean" },
                                        "assetStatus": {
                                            "enum": [
                                                "missing",
                                                "downloading",
                                                "ready"
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "spectators": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "joinQueuePosition": {
                                            "anyOf": [
                                                { "type": "number" },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "bots": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "hostUserId": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" },
                                        "name": {
                                            "anyOf": [
                                                {
                                                    "description": "name to display in the lobby",
                                                    "type": "string"
                                                },
                                                { "type": "null" }
                                            ]
                                        },
                                        "shortName": {
                                            "description": "Short name of the bot. Used to uniquely identify which bot to run",
                                            "type": "string"
                                        },
                                        "version": {
                                            "anyOf": [
                                                { "type": "string" },
                                                { "type": "null" }
                                            ]
                                        },
                                        "options": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "patternProperties": {
                                                        "^(.*)$": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id", "version", "options"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "currentBattle": {
                    "anyOf": [
                        {
                            "description": "If a battle is currently happening, here are the info",
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "startedAt": {
                                    "$ref": "#/definitions/unixTime"
                                }
                            },
                            "required": ["id", "startedAt"]
                        },
                        { "type": "null" }
                    ]
                },
                "currentVote": {
                    "anyOf": [
                        {
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "action": {
                                    "anyOf": [
                                        { "$ref": "#/definitions/voteActions" },
                                        { "type": "null" }
                                    ]
                                },
                                "initiator": { "$ref": "#/definitions/userId" },
                                "voters": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^(.*)$": {
                                            "type": "object",
                                            "properties": {
                                                "vote": {
                                                    "enum": [
                                                        "pending",
                                                        "yes",
                                                        "no",
                                                        "abstain"
                                                    ]
                                                }
                                            },
                                            "required": ["vote"]
                                        }
                                    }
                                },
                                "until": { "$ref": "#/definitions/unixTime" }
                            },
                            "required": ["id"]
                        },
                        { "type": "null" }
                    ]
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "laboris ipsum ea ut sit",
    "commandId": "lobby/updated",
    "data": {
        "id": "elit officia voluptate ullamco qui",
        "name": "elit in",
        "mapName": "amet",
        "engineVersion": "cupidatat reprehenderit adipisicing dolor laboris",
        "gameVersion": "tempor",
        "allyTeamConfig": {
            "(~=&rb59K": null,
            "|-$!Sr>/": {
                "startBox": {
                    "top": 0.2002837061882019,
                    "bottom": 0.6300926804542542,
                    "left": 0.8946351408958435,
                    "right": 0.1699836254119873
                },
                "maxTeams": 56827367,
                "teams": {
                    ")%wo": null,
                    "": null,
                    "$(@`{yl<M": null,
                    "'4R": {
                        "sint0": false,
                        "sint_e": "do deserunt",
                        "elit0a": 77871978,
                        "eud": "consectetur irure elit nulla labore",
                        "ex__e": false
                    }
                }
            },
            ">C!YkZ}6": {
                "startBox": {
                    "top": 0.6333130598068237,
                    "bottom": 0.2099606990814209,
                    "left": 0.32731449604034424,
                    "right": 0.22075343132019043
                },
                "maxTeams": 88495011,
                "teams": {
                    "KB1K33tv`X": {
                        "magnafa": 48699259.757995605,
                        "et_0": "ex",
                        "commodo__": 73771476,
                        "nostrud0c2": -71593798
                    },
                    "}o": {
                        "utba": -97034299.37362671,
                        "in_d94": false,
                        "veniam598": "in cillum quis consectetur nulla",
                        "maxPlayers": 57799078
                    }
                }
            },
            "": {
                "startBox": {
                    "top": 0.9507393836975098,
                    "bottom": 0.7305654883384705,
                    "left": 0.724152684211731,
                    "right": 0.7467890977859497
                },
                "maxTeams": 36333573,
                "teams": {
                    "zFbFQ<K": {
                        "anim_57f": -6887913,
                        "reprehenderit4": -60563206.67266846,
                        "nisi0": "aliquip",
                        "maxPlayers": 20538307
                    },
                    "M1q[X1}*": {
                        "consequat_f_": "aute esse culpa Lorem",
                        "dolore_6": false,
                        "laboris_28": -58267963,
                        "maxPlayers": 23540932
                    },
                    "": {
                        "nulla__": false,
                        "proidentde_": -27431273.460388184,
                        "dolore976": 64253926.277160645,
                        "maxPlayers": 56137014
                    }
                }
            }
        },
        "players": {
            "r": null,
            "byC {": {
                "id": "351",
                "player": "ut mollit proident enim eiusmod",
                "isReady": false,
                "assetStatus": "downloading"
            },
            "@>Yx2#QHI": {
                "id": "351",
                "allyTeam": "est deserunt ex quis",
                "team": "et laboris veniam"
            }
        },
        "spectators": {
            "E[1wX": {
                "id": "351",
                "joinQueuePosition": 70429956.91299438
            },
            "": null
        },
        "bots": {
            "K^)t|8m}dH": {
                "id": "magna sint Ut",
                "team": "ut velit Excepteur in deserunt",
                "shortName": "consectetur magna",
                "version": "proident Ut consectetur",
                "options": null
            }
        },
        "currentBattle": {
            "id": "aute",
            "startedAt": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type LobbyName = string;
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/updated";
    data: LobbyUpdatedEventData;
}
export interface LobbyUpdatedEventData {
    id: string;
    name?: LobbyName;
    mapName?: string;
    engineVersion?: string;
    gameVersion?: string;
    allyTeamConfig?: {
        [k: string]: {
            startBox?: StartBox;
            maxTeams?: number;
            teams: {
                [k: string]: {
                    maxPlayers?: number;
                } | null;
            };
        } | null;
    };
    players?: {
        [k: string]: {
            id: UserId;
            allyTeam?: string;
            team?: string;
            player?: string;
            isReady?: boolean;
            assetStatus?: "missing" | "downloading" | "ready";
        } | null;
    };
    spectators?: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number | null;
        } | null;
    };
    bots?: {
        [k: string]: {
            id: string;
            hostUserId?: UserId;
            allyTeam?: string;
            team?: string;
            player?: string;
            name?: string | null;
            shortName?: string;
            version: string | null;
            options: {
                [k: string]: string | null;
            } | null;
        } | null;
    };
    currentBattle?: {
        id: string;
        startedAt: UnixTime;
    } | null;
    currentVote?: {
        id: string;
        action?: VoteActions | null;
        initiator?: UserId;
        voters?: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until?: UnixTime;
    } | null;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
---

## VoteEnded

To let clients know a vote has finished and its outcome

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteEndedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/voteEnded" },
        "data": {
            "title": "LobbyVoteEndedEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "outcome": {
                    "enum": ["passed", "failed", "cancelled", "timeout"]
                }
            },
            "required": ["id", "outcome"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "fugiat",
    "commandId": "lobby/voteEnded",
    "data": {
        "id": "Ut ullamco irure",
        "outcome": "passed"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteEndedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/voteEnded";
    data: LobbyVoteEndedEventData;
}
export interface LobbyVoteEndedEventData {
    id: string;
    outcome: "passed" | "failed" | "cancelled" | "timeout";
}
```
---

## VoteSubmit

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteSubmitRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/voteSubmit" },
        "data": {
            "title": "LobbyVoteSubmitRequestData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "vote": { "enum": ["yes", "no", "abstain"] }
            },
            "required": ["id", "vote"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "in",
    "commandId": "lobby/voteSubmit",
    "data": {
        "id": "nisi esse",
        "vote": "abstain"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteSubmitRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/voteSubmit";
    data: LobbyVoteSubmitRequestData;
}
export interface LobbyVoteSubmitRequestData {
    id: string;
    vote: "yes" | "no" | "abstain";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteSubmitResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyVoteSubmitOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/voteSubmit" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyVoteSubmitFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/voteSubmit" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "elit in Duis in",
    "commandId": "lobby/voteSubmit",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteSubmitOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/voteSubmit";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

