<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Lobby

# Lobby

A lobby is a place where players can chat and setup a game before going into it.
A player can only be in at most one lobby at a time.


## Updates with JSON patch

For updates, we are using json merge patch [RFC 7386](https://www.rfc-editor.org/rfc/rfc7386.html).
These are used for [lobby/listUpdated](#listUpdated) and [lobby/updated](#updated) events. More
on them below.

An example of json patch:

```json
{
    "teams": {
        "01": {"maxPlayers": 1},
        "02": {"maxPlayers": 2}
    }
}
```
is the representation of
```json
{
    "teams": [{"maxPlayers": 1}, {"maxPlayers": 2}]
}
```

Removing the first team can be represented by the following patch objects (they are equivalent):

```json
{
    "teams": {
        "01": {"maxPlayers": 2},
        "02": null
    }
}

{
    "teams": {
        "01": null
    }
}
```


## Lobby details

[lobby/create](#create) is used to create and join a lobby. When you create a lobby
you also automatically becomes the first player in the first allyTeam.

For other player to join a lobby, they need the lobby ID with [lobby/join](#join),
this operation is idempotent. Attempting to join a different lobby while being
in a lobby will fail with `invalid_request`.

Upon joining, clients receive the full state of the lobby as
response and will automatically get [lobby/updated](#updated) events when
something changes. There is no need to subscribe or unsubscribe to this event,
lobby membership is equivalent to subscription.
This event follow the same json merge patch structure.
As such, arrays like teams are represented using objects, where the items
are ordered based on their keys.

A player can use [lobby/leave](#leave) to leave the lobby, but can also be forcibly removed
from a lobby, in which case they would receive [lobby/left](#left) event. This can
happen when the player is kicked, or if the lobby crashed. In this case, the client should
consider no longer in the lobby. This event is only sent to the player that was removed.
It will not be sent when the client leave using [lobby/leave](#leave).

When a lobby is empty, it is automatically disposed off.


### Lobby members

Joining a lobby puts the user as a spectator.
They can then use [lobby/joinAllyTeam](#joinAllyTeam) to join a specific ally team.
If the target ally team is full, the request fails and nothing happen. `joinAllyTeam` can also be used
to change team. Similarly, if the ally team is full, the request fails and nothing happen.

A member can also choose to join the waiting queue of the lobby with [lobby/joinQueue](#joinQueue). This can be used when all ally teams are full, and/or when the user doesn't care which ally team they should join.
A member in the join queue is represented as a spectator with `{joinQueuePosition: number()}`. The join queue
positions may not be consecutive. The following is possible:

```
spectators: {
    "123": {"id": "123", "joinQueuePosition": 3}
    "456": {"id": "456", "joinQueuePosition": 1}
    "789": {"id": "789", "joinQueuePosition": 10}
}
```

When a suitable ally team has a free spot for a waiting player, the server will automatically put them
in that spot and update its state through [lobby/updated](#updated).
A member simply spectating and not waiting to play will have a null `joinQueuePosition`.
To leave an ally team or the join queue and become a spectator, a user should use [lobby/spectate](#spectate).


### Lobby updates

Any member can update most (any?) property of the lobby. Updates are all or nothing, if updating a proprety
is not possible (invalid or forbidden), then no update take place.
The result of the updates is then transmitted to all members via [lobby/updated](#updated) events.

When an operation requires a vote, the vote data is also transmitted with [lobby/updated](#updated) events.
And when the vote ends, a [lobby/voteEnded][#voteEnded] event is sent to all lobby members. This is to simplify
client logic if they want to show a notification in addition to the updated state.

## List of all lobbies

Other players can get the list of lobbies through [lobby/subscribeList](#subscribeList). After being
subscribed they receive [lobby/listUpdated](#listUpdated) events.
This allow clients to maintain a list of lobbies on their side.
The event [lobby/listReset](#listReset) holds the full list of lobbies. Upon receiving this
event, a client should set its internal list of lobbies according to this event.
In practice, this event should rarely be seen.

---
- [addBot](#addbot)
- [create](#create)
- [join](#join)
- [joinAllyTeam](#joinallyteam)
- [joinQueue](#joinqueue)
- [leave](#leave)
- [left](#left)
- [listReset](#listreset)
- [listUpdated](#listupdated)
- [removeBot](#removebot)
- [spectate](#spectate)
- [startBattle](#startbattle)
- [subscribeList](#subscribelist)
- [unsubscribeList](#unsubscribelist)
- [update](#update)
- [updateBot](#updatebot)
- [updated](#updated)
- [voteEnded](#voteended)
- [voteSubmit](#votesubmit)
---

## AddBot

Add a bot to the specified ally team

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/addBot" },
        "data": {
            "title": "LobbyAddBotRequestData",
            "type": "object",
            "properties": {
                "allyTeam": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "Short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string",
                    "maxLength": 20
                },
                "version": { "type": "string" },
                "options": {
                    "type": "object",
                    "patternProperties": { "^(.*)$": { "type": "string" } }
                }
            },
            "required": ["allyTeam", "shortName"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor aute ea in",
    "commandId": "lobby/addBot",
    "data": {
        "allyTeam": "laborum voluptate",
        "name": "fugiat",
        "shortName": "au",
        "version": "magna veniam sed",
        "options": {
            "8wOU!a": "aliquip",
            "": "magna dolore eu",
            "2K": "irure"
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/addBot";
    data: LobbyAddBotRequestData;
}
export interface LobbyAddBotRequestData {
    allyTeam: string;
    name?: string;
    shortName: string;
    version?: string;
    options?: {
        [k: string]: string;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyAddBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyAddBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "success" },
                "data": {
                    "title": "LobbyAddBotOkResponseData",
                    "type": "object",
                    "properties": {
                        "id": {
                            "description": "The id the server generated for this bot",
                            "type": "string"
                        }
                    },
                    "required": ["id"]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyAddBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/addBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "nisi ut commodo",
    "commandId": "lobby/addBot",
    "status": "success",
    "data": {
        "id": "in"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyAddBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/addBot";
    status: "success";
    data: LobbyAddBotOkResponseData;
}
export interface LobbyAddBotOkResponseData {
    id: string;
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Create

Create a lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/create" },
        "data": {
            "title": "LobbyCreateRequestData",
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "mapName": { "type": "string" },
                "allyTeamConfig": { "$ref": "#/definitions/allyTeamConfig" }
            },
            "required": ["name", "mapName", "allyTeamConfig"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "exercitation",
    "commandId": "lobby/create",
    "data": {
        "name": "laboris Duis",
        "mapName": "pariatur sint sed",
        "allyTeamConfig": [
            {
                "maxTeams": 10584546,
                "startBox": {
                    "top": 0.2692078948020935,
                    "bottom": 0.5980529189109802,
                    "left": 0.83367520570755,
                    "right": 0.38755643367767334
                },
                "teams": []
            },
            {
                "maxTeams": 45991004,
                "startBox": {
                    "top": 0.47580695152282715,
                    "bottom": 0.7716678380966187,
                    "left": 0.9239792227745056,
                    "right": 0.6328656673431396
                },
                "teams": [
                    {
                        "maxPlayers": 94429130
                    },
                    {
                        "maxPlayers": 43390680
                    }
                ]
            },
            {
                "maxTeams": 67363990,
                "startBox": {
                    "top": 0.832726240158081,
                    "bottom": 0.8541895151138306,
                    "left": 0.6024702787399292,
                    "right": 0.414419949054718
                },
                "teams": []
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type AllyTeamConfig = {
    maxTeams: number;
    startBox: StartBox;
    teams: {
        maxPlayers: number;
    }[];
}[];

export interface LobbyCreateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/create";
    data: LobbyCreateRequestData;
}
export interface LobbyCreateRequestData {
    name: string;
    mapName: string;
    allyTeamConfig: AllyTeamConfig;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyCreateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyCreateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyCreateOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyCreateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/create" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate in",
    "commandId": "lobby/create",
    "status": "success",
    "data": {
        "id": "dolore do labore mollit culpa",
        "name": "nulla culpa aliquip exercitation",
        "mapName": "in",
        "engineVersion": "laborum est cupidatat",
        "gameVersion": "sunt ut incididunt",
        "allyTeamConfig": {
            "'zA": {
                "startBox": {
                    "top": 0.6702225208282471,
                    "bottom": 0.08513057231903076,
                    "left": 0.6979477405548096,
                    "right": 0.39217686653137207
                },
                "maxTeams": 49125404,
                "teams": {
                    "&Z`y[~1<$\"": {
                        "maxPlayers": 93489022
                    },
                    "YJn&cu:{BT": {
                        "maxPlayers": 94367475
                    },
                    "p>g": {
                        "maxPlayers": 83924681
                    },
                    "bVt55^^F+)": {
                        "maxPlayers": 22539419
                    },
                    ";": {
                        "maxPlayers": 86343200
                    }
                }
            },
            "%}": {
                "startBox": {
                    "top": 0.575905978679657,
                    "bottom": 0.04219859838485718,
                    "left": 0.48406165838241577,
                    "right": 0.6355019807815552
                },
                "maxTeams": 31750095,
                "teams": {
                    "": {
                        "maxPlayers": 58379370
                    },
                    "Di#gQz": {
                        "maxPlayers": 11101032
                    },
                    "sK": {
                        "maxPlayers": 32934458
                    }
                }
            }
        },
        "players": {
            "": {
                "id": "351",
                "allyTeam": "aliquip deserunt non ad",
                "team": "enim incididunt eu amet",
                "player": "aliqua"
            },
            ")=ZhY": {
                "id": "351",
                "allyTeam": "in",
                "team": "dolor mollit quis",
                "player": "laboris consectetur nulla"
            },
            "*7xwD}:?w\"": {
                "id": "351",
                "allyTeam": "non Lorem velit",
                "team": "mollit Lorem",
                "player": "labore voluptate"
            }
        },
        "spectators": {
            "p,D5.Teb": {
                "id": "351"
            },
            "hWMW": {
                "id": "351",
                "joinQueuePosition": -56940078.73535156
            },
            "MJ6}R/~9w": {
                "id": "351",
                "joinQueuePosition": -90729725.36087036
            }
        },
        "bots": {
            "Y<o7D5hOp": {
                "id": "aliqua ipsum officia ut",
                "hostUserId": "351",
                "allyTeam": "est consequat in qui",
                "team": "ex amet elit",
                "player": "amet",
                "name": "ipsum ex",
                "shortName": "ut do c",
                "version": "Ut ullamco culpa aliqua",
                "options": {
                    "R.q": "Lorem",
                    "": "pariatur fugiat laboris",
                    "|n": "velit voluptate laboris labore sint",
                    "UUL=uo": "anim in aliquip aute dolor",
                    "2FVIf": "anim aliqua veniam"
                }
            },
            "tl8<Sm": {
                "id": "ut cillum",
                "hostUserId": "351",
                "allyTeam": "ut velit in Excepteur occaecat",
                "team": "Duis velit",
                "player": "consequat sunt enim ullamco amet",
                "name": "consectet",
                "shortName": "amet",
                "version": "ipsum sunt ut esse",
                "options": {
                    "3kG82": "occaecat officia",
                    "Mg": "aliqua ut do",
                    "b2,\\1UU": "qui Excepteur",
                    "2XK!)K": "in do minim Ut"
                }
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        },
        "currentVote": {
            "id": "sed ea occaecat Ut",
            "action": {
                "type": "start"
            },
            "initiator": "351",
            "voters": {
                "Ry;": {
                    "vote": "pending"
                },
                "vR]g~&z<n": {
                    "vote": "no"
                }
            },
            "until": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyCreateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/create";
    status: "success";
    data: LobbyCreateOkResponseData;
}
export interface LobbyCreateOkResponseData {
    id: string;
    name: string;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
    currentVote?: {
        id: string;
        action: VoteActions;
        initiator: UserId;
        voters: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Join

Join a lobby. On success, get the lobby state and will receive updated events as long as player is in lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/join" },
        "data": {
            "title": "LobbyJoinRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "veniam",
    "commandId": "lobby/join",
    "data": {
        "id": "est irure mollit"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/join";
    data: LobbyJoinRequestData;
}
export interface LobbyJoinRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "success" },
                "data": {
                    "$ref": "#/definitions/lobbyDetails",
                    "title": "LobbyJoinOkResponseData"
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "LobbyJoinFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/join" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "lobby_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ea ullamco dolore nostrud in",
    "commandId": "lobby/join",
    "status": "success",
    "data": {
        "id": "aliqua deserunt sit",
        "name": "culpa ea cillum sed",
        "mapName": "cupidatat fugiat",
        "engineVersion": "nostrud",
        "gameVersion": "consectetur nulla",
        "allyTeamConfig": {
            "W |:KuOk/x": {
                "startBox": {
                    "top": 0.9852176904678345,
                    "bottom": 0.8239824771881104,
                    "left": 0.1293366551399231,
                    "right": 0.4055666923522949
                },
                "maxTeams": 37898821,
                "teams": {
                    "/#": {
                        "maxPlayers": 10862983
                    },
                    "Tgi:=W1e[l": {
                        "maxPlayers": 89296908
                    },
                    "k": {
                        "maxPlayers": 52734781
                    },
                    ".?P!U,!?5'": {
                        "maxPlayers": 3402854
                    }
                }
            },
            "hoF5u}Kzr": {
                "startBox": {
                    "top": 0.6892774701118469,
                    "bottom": 0.8497186899185181,
                    "left": 0.7103871703147888,
                    "right": 0.9681347608566284
                },
                "maxTeams": 96600134,
                "teams": {
                    ")([kEBk": {
                        "maxPlayers": 71045322
                    },
                    "'o%8'^": {
                        "maxPlayers": 91175366
                    },
                    ".dL{FOk": {
                        "maxPlayers": 73071063
                    },
                    "Ao": {
                        "maxPlayers": 1691151
                    }
                }
            },
            "C": {
                "startBox": {
                    "top": 0.03288298845291138,
                    "bottom": 0.4155328869819641,
                    "left": 0.1541842818260193,
                    "right": 0.964246928691864
                },
                "maxTeams": 61257262,
                "teams": {
                    "": {
                        "maxPlayers": 23848182
                    },
                    "lTI2\\_;`#": {
                        "maxPlayers": 91612584
                    },
                    "Io6": {
                        "maxPlayers": 79138524
                    },
                    "$IZK?A^": {
                        "maxPlayers": 73491222
                    }
                }
            }
        },
        "players": {
            "": {
                "id": "351",
                "allyTeam": "nostrud labore aliquip ut",
                "team": "eiusmod adipisicing",
                "player": "Excepteur sint pariatur"
            }
        },
        "spectators": {
            ".": {
                "id": "351",
                "joinQueuePosition": 95674633.97979736
            },
            "Wl\\kK": {
                "id": "351"
            }
        },
        "bots": {
            "": {
                "id": "in velit",
                "hostUserId": "351",
                "allyTeam": "veniam",
                "team": "nisi pariatur magna",
                "player": "dolore sunt dolore velit",
                "name": "si",
                "shortName": "dolore fugiat u",
                "version": "consectetur eiusmod est",
                "options": {
                    "/~%4": "dolore adipisicing ad do",
                    "Z\\2{[74": "do reprehenderit deserunt"
                }
            },
            ";/.": {
                "id": "Ut culpa laboris ex esse",
                "hostUserId": "351",
                "allyTeam": "anim commodo",
                "team": "Lorem cupidatat enim id",
                "player": "dolor consequat",
                "name": "ad Excepteur",
                "shortName": "esse aliqua deser",
                "version": "et Duis",
                "options": {
                    "tIG9t~": "voluptate minim enim eiusmod sint",
                    "48.`M'Vz;": "veniam",
                    "z+": "id",
                    "e_8ld90": "Ut qui reprehenderit nostrud"
                }
            },
            ";l!LuIaV": {
                "id": "do proident",
                "hostUserId": "351",
                "allyTeam": "Excepteur et do officia nisi",
                "team": "in",
                "player": "sunt eiusmod ex elit",
                "name": "aliquip c",
                "shortName": "in culpa Lor",
                "version": "commodo ex deserunt dolore",
                "options": {
                    "3lk8;s!L": "in nostrud laboris ex esse",
                    "tE9/": "culpa commodo nisi",
                    "`)k_gP": "aliquip Ut Excepteur cillum ad",
                    "Mx[9": "ad in laborum",
                    "([\\rNq": "id voluptate sit ullamco"
                }
            },
            "Q~`SovAi": {
                "id": "ad sint sed incididunt enim",
                "hostUserId": "351",
                "allyTeam": "dolore dolore exercitation reprehenderit",
                "team": "enim consectetur incididunt irure",
                "player": "Ut",
                "name": "voluptate",
                "shortName": "laborum proident in ",
                "version": "dolor",
                "options": {
                    "": "enim esse non",
                    "t": "dolore Duis occaecat cupidatat non",
                    "R`|B": "in"
                }
            }
        },
        "currentBattle": {
            "startedAt": 1705432698000000
        },
        "currentVote": {
            "id": "occaecat amet",
            "action": {
                "type": "changeMap",
                "newMapName": "in"
            },
            "initiator": "351",
            "voters": {
                "f^&=z\\": {
                    "vote": "no"
                },
                "NB^}3R": {
                    "vote": "yes"
                },
                "KR(#.qkj<8": {
                    "vote": "yes"
                }
            },
            "until": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyJoinOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/join";
    status: "success";
    data: LobbyJoinOkResponseData;
}
export interface LobbyJoinOkResponseData {
    id: string;
    name: string;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    allyTeamConfig: {
        [k: string]: {
            startBox: StartBox;
            maxTeams: number;
            teams: {
                [k: string]: {
                    maxPlayers: number;
                };
            };
        };
    };
    players: {
        [k: string]: {
            id: UserId;
            allyTeam: string;
            team: string;
            player: string;
        };
    };
    spectators: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number;
        };
    };
    bots: {
        [k: string]: {
            id: string;
            hostUserId: string;
            allyTeam: string;
            team: string;
            player: string;
            name?: string;
            shortName: string;
            version?: string;
            options?: {
                [k: string]: string;
            };
        };
    };
    currentBattle?: {
        startedAt: UnixTime;
    };
    currentVote?: {
        id: string;
        action: VoteActions;
        initiator: UserId;
        voters: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until: UnixTime;
    };
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
Possible Failed Reasons: `lobby_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinAllyTeam

Joins the given ally team in an empty team.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinAllyTeam" },
        "data": {
            "title": "LobbyJoinAllyTeamRequestData",
            "type": "object",
            "properties": { "allyTeam": { "type": "string" } },
            "required": ["allyTeam"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim deserunt do",
    "commandId": "lobby/joinAllyTeam",
    "data": {
        "allyTeam": "Excepteur est officia"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    data: LobbyJoinAllyTeamRequestData;
}
export interface LobbyJoinAllyTeamRequestData {
    allyTeam: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinAllyTeamResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinAllyTeamOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinAllyTeamFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinAllyTeam" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "ally_team_full",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "tempor elit eiusmod",
    "commandId": "lobby/joinAllyTeam",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinAllyTeamOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinAllyTeam";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `ally_team_full`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## JoinQueue

Joins the waiting queue to play. The server will automatically put the user in the first suitable ally team when the time comes.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/joinQueue" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "reprehenderit Duis exercitation id",
    "commandId": "lobby/joinQueue"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/joinQueue";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyJoinQueueResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyJoinQueueOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyJoinQueueFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/joinQueue" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "fugiat quis aliqua",
    "commandId": "lobby/joinQueue",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinQueueOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/joinQueue";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Leave

Leave the lobby, also unsubscribe from any update

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/leave" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi exercitation",
    "commandId": "lobby/leave"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/leave";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeaveResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyLeaveOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyLeaveFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/leave" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ad amet est",
    "commandId": "lobby/leave",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/leave";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Left

Sent by the server when the player is removed from the lobby. Can be kicked/ban or the lobby crashed

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyLeftEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/left" },
        "data": {
            "title": "LobbyLeftEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "reason": { "type": "string" }
            },
            "required": ["id", "reason"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "est",
    "commandId": "lobby/left",
    "data": {
        "id": "et pariatur proident",
        "reason": "voluptate quis consectetur"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeftEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/left";
    data: LobbyLeftEventData;
}
export interface LobbyLeftEventData {
    id: string;
    reason: string;
}
```
---

## ListReset

Sent by the server to give the client the full list of all lobbies

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListResetEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listReset" },
        "data": {
            "title": "LobbyListResetEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": { "$ref": "#/definitions/lobbyOverview" }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "sint",
    "commandId": "lobby/listReset",
    "data": {
        "lobbies": {
            "JH+": {
                "id": "nulla eiusmod",
                "name": "ad ullamco sunt ipsum proident",
                "playerCount": 26791585,
                "maxPlayerCount": -87375796,
                "mapName": "amet proident non elit",
                "engineVersion": "in nostrud",
                "gameVersion": "ullamco esse cillum enim",
                "currentBattle": null
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;

export interface LobbyListResetEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listReset";
    data: LobbyListResetEventData;
}
export interface LobbyListResetEventData {
    lobbies: {
        [k: string]: LobbyOverview;
    };
}
export interface LobbyOverview {
    id: string;
    name: string;
    playerCount: number;
    maxPlayerCount: number;
    mapName: string;
    engineVersion: string;
    gameVersion: string;
    currentBattle: {
        startedAt: UnixTime;
    } | null;
}
```
---

## ListUpdated

Sent by the server whenever some lobbies are added, removed or modified.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyListUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/listUpdated" },
        "data": {
            "title": "LobbyListUpdatedEventData",
            "type": "object",
            "properties": {
                "lobbies": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "name": { "type": "string" },
                                        "playerCount": { "type": "integer" },
                                        "maxPlayerCount": { "type": "integer" },
                                        "mapName": { "type": "string" },
                                        "engineVersion": { "type": "string" },
                                        "gameVersion": { "type": "string" },
                                        "currentBattle": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "startedAt": {
                                                            "$ref": "#/definitions/unixTime"
                                                        }
                                                    },
                                                    "required": ["startedAt"]
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                }
            },
            "required": ["lobbies"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "in dolore",
    "commandId": "lobby/listUpdated",
    "data": {
        "lobbies": {
            "^-S:": {
                "id": "incididunt consectetur dolor",
                "name": "ex sed anim",
                "playerCount": 7251906,
                "maxPlayerCount": -89825213,
                "mapName": "id pariatur tempor ullamco",
                "engineVersion": "magna",
                "currentBattle": null
            },
            "N <": {
                "id": "proident quis",
                "gameVersion": "adipisicing ipsum aute officia"
            }
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;

export interface LobbyListUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/listUpdated";
    data: LobbyListUpdatedEventData;
}
export interface LobbyListUpdatedEventData {
    lobbies: {
        [k: string]: {
            id: string;
            name?: string;
            playerCount?: number;
            maxPlayerCount?: number;
            mapName?: string;
            engineVersion?: string;
            gameVersion?: string;
            currentBattle?: {
                startedAt: UnixTime;
            } | null;
        } | null;
    };
}
```
---

## RemoveBot

Remove the specified bot from the lobby

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/removeBot" },
        "data": {
            "title": "LobbyRemoveBotRequestData",
            "type": "object",
            "properties": { "id": { "type": "string" } },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sed Lorem",
    "commandId": "lobby/removeBot",
    "data": {
        "id": "Excepteur esse exercitation incididunt"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/removeBot";
    data: LobbyRemoveBotRequestData;
}
export interface LobbyRemoveBotRequestData {
    id: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyRemoveBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyRemoveBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyRemoveBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/removeBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "esse eiusmod",
    "commandId": "lobby/removeBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyRemoveBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/removeBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Spectate

Move the client to the spectator queue. If already in spectator queue, has no effect (but still succeed).

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/spectate" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ut pariatur",
    "commandId": "lobby/spectate"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/spectate";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySpectateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySpectateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySpectateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/spectate" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "mollit id",
    "commandId": "lobby/spectate",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySpectateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/spectate";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## StartBattle

Start the battle for the lobby. If this request succeed players will receive a battle/start request.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/startBattle" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "nisi ut ullamco sint",
    "commandId": "lobby/startBattle"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/startBattle";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyStartBattleResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyStartBattleOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyStartBattleFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/startBattle" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "occaecat id in do nostrud",
    "commandId": "lobby/startBattle",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyStartBattleOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/startBattle";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SubscribeList

Ask the server to send updates about lobby list. Idempotent, subscribing multiple time has no effect.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/subscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "incididunt deserunt ullamco culpa nulla",
    "commandId": "lobby/subscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/subscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbySubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbySubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbySubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/subscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "non",
    "commandId": "lobby/subscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/subscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UnsubscribeList

Ask the server to stop sending updates about lobby list. Idempotent, if not subscribed, will still succeed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/unsubscribeList" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Duis dolor esse",
    "commandId": "lobby/unsubscribeList"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/unsubscribeList";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUnsubscribeListResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUnsubscribeListOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUnsubscribeListFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/unsubscribeList" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "reprehenderit",
    "commandId": "lobby/unsubscribeList",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeListOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/unsubscribeList";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Update

Update some properties of the lobby the player is in.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/update" },
        "data": {
            "title": "LobbyUpdateRequestData",
            "type": "object",
            "properties": {
                "name": {
                    "description": "to rename the lobby",
                    "type": "string"
                },
                "mapName": { "type": "string" },
                "allyTeamConfig": { "$ref": "#/definitions/allyTeamConfig" }
            }
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ad cillum sed cupidatat",
    "commandId": "lobby/update",
    "data": {
        "in70a": true,
        "name": "minim magna eu mollit adipisicing",
        "allyTeamConfig": [
            {
                "maxTeams": 60585350,
                "startBox": {
                    "top": 0.09639787673950195,
                    "bottom": 0.5077924132347107,
                    "left": 0.6672755479812622,
                    "right": 0.24469232559204102
                },
                "teams": [
                    {
                        "maxPlayers": 81391311
                    },
                    {
                        "maxPlayers": 85315747
                    }
                ]
            },
            {
                "maxTeams": 21366853,
                "startBox": {
                    "top": 0.9255445599555969,
                    "bottom": 0.7585924863815308,
                    "left": 0.18390631675720215,
                    "right": 0.7069403529167175
                },
                "teams": [
                    {
                        "maxPlayers": 13284898
                    }
                ]
            },
            {
                "maxTeams": 92354984,
                "startBox": {
                    "top": 0.6213186383247375,
                    "bottom": 0.7227727770805359,
                    "left": 0.7365755438804626,
                    "right": 0.1030048131942749
                },
                "teams": [
                    {
                        "maxPlayers": 18122399
                    }
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type AllyTeamConfig = {
    maxTeams: number;
    startBox: StartBox;
    teams: {
        maxPlayers: number;
    }[];
}[];

export interface LobbyUpdateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/update";
    data: LobbyUpdateRequestData;
}
export interface LobbyUpdateRequestData {
    name?: string;
    mapName?: string;
    allyTeamConfig?: AllyTeamConfig;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/update" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/update" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in Ut ad aute voluptate",
    "commandId": "lobby/update",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/update";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## UpdateBot

Change a bot properties. Some properties like ID and allyTeam can't be changed.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updateBot" },
        "data": {
            "title": "LobbyUpdateBotRequestData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": {
                    "description": "name to display in the lobby",
                    "type": "string",
                    "maxLength": 20
                },
                "shortName": {
                    "description": "short name of the bot. Used to uniquely identify which bot to run",
                    "type": "string"
                },
                "version": {
                    "anyOf": [{ "type": "string" }, { "type": "null" }]
                },
                "options": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [{ "type": "string" }, { "type": "null" }]
                        }
                    }
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor veniam amet",
    "commandId": "lobby/updateBot",
    "data": {
        "id": "Duis proident adipisicing",
        "name": "commodo",
        "shortName": "exercitation elit",
        "version": "do esse irure culpa",
        "options": {
            "D(Rt$sQ4J": null,
            "[+[K`k": null,
            "h_\"%rV7e": "ad dolore in enim",
            ",j$$^@": null
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/updateBot";
    data: LobbyUpdateBotRequestData;
}
export interface LobbyUpdateBotRequestData {
    id: string;
    name?: string;
    shortName?: string;
    version?: string | null;
    options?: {
        [k: string]: string | null;
    };
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdateBotResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyUpdateBotOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyUpdateBotFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/updateBot" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "not_in_lobby",
                        "invalid_bot",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in voluptate elit culpa occaecat",
    "commandId": "lobby/updateBot",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdateBotOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/updateBot";
    status: "success";
}
```
Possible Failed Reasons: `not_in_lobby`, `invalid_bot`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Updated

Sent by the server whenever something in the lobby changes. Uses json patch (RFC-7386)

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyUpdatedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/updated" },
        "data": {
            "title": "LobbyUpdatedEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "mapName": { "type": "string" },
                "engineVersion": { "type": "string" },
                "gameVersion": { "type": "string" },
                "allyTeamConfig": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "description": "this represent an array, items should be sorted lexicographically on their keys",
                                    "type": "object",
                                    "properties": {
                                        "startBox": {
                                            "$ref": "#/definitions/startBox"
                                        },
                                        "maxTeams": {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        "teams": {
                                            "type": "object",
                                            "patternProperties": {
                                                "^(.*)$": {
                                                    "anyOf": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "maxPlayers": {
                                                                    "type": "integer",
                                                                    "minimum": 1
                                                                }
                                                            }
                                                        },
                                                        { "type": "null" }
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    "required": ["teams"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "players": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "spectators": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "joinQueuePosition": {
                                            "anyOf": [
                                                { "type": "number" },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "bots": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "id": { "type": "string" },
                                        "hostUserId": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "allyTeam": { "type": "string" },
                                        "team": { "type": "string" },
                                        "player": { "type": "string" },
                                        "name": {
                                            "anyOf": [
                                                {
                                                    "description": "name to display in the lobby",
                                                    "type": "string"
                                                },
                                                { "type": "null" }
                                            ]
                                        },
                                        "shortName": {
                                            "description": "Short name of the bot. Used to uniquely identify which bot to run",
                                            "type": "string"
                                        },
                                        "version": {
                                            "anyOf": [
                                                { "type": "string" },
                                                { "type": "null" }
                                            ]
                                        },
                                        "options": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "patternProperties": {
                                                        "^(.*)$": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                { "type": "null" }
                                            ]
                                        }
                                    },
                                    "required": ["id", "version", "options"]
                                },
                                { "type": "null" }
                            ]
                        }
                    }
                },
                "currentBattle": {
                    "anyOf": [
                        {
                            "description": "If a battle is currently happening, here are the info",
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "startedAt": {
                                    "$ref": "#/definitions/unixTime"
                                }
                            },
                            "required": ["id", "startedAt"]
                        },
                        { "type": "null" }
                    ]
                },
                "currentVote": {
                    "anyOf": [
                        {
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "action": {
                                    "anyOf": [
                                        { "$ref": "#/definitions/voteActions" },
                                        { "type": "null" }
                                    ]
                                },
                                "initiator": { "$ref": "#/definitions/userId" },
                                "voters": {
                                    "type": "object",
                                    "patternProperties": {
                                        "^(.*)$": {
                                            "type": "object",
                                            "properties": {
                                                "vote": {
                                                    "enum": [
                                                        "pending",
                                                        "yes",
                                                        "no",
                                                        "abstain"
                                                    ]
                                                }
                                            },
                                            "required": ["vote"]
                                        }
                                    }
                                },
                                "until": { "$ref": "#/definitions/unixTime" }
                            },
                            "required": ["id"]
                        },
                        { "type": "null" }
                    ]
                }
            },
            "required": ["id"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "laboris ipsum ea ut sit",
    "commandId": "lobby/updated",
    "data": {
        "id": "non",
        "name": "aliquip culpa cillum mollit",
        "mapName": "eiusmod",
        "engineVersion": "in",
        "gameVersion": "ullamco sint reprehenderit dolor amet",
        "allyTeamConfig": {
            "q(": null,
            "": null
        },
        "players": {
            "|-$!Sr>/": null
        },
        "spectators": {
            "}68%d5": {
                "id": "351",
                "joinQueuePosition": -81725800.03738403
            },
            "f_XxC$3": {
                "id": "351",
                "joinQueuePosition": 72971963.88244629
            },
            "0UfeO:bH)": {
                "id": "351",
                "joinQueuePosition": null
            }
        },
        "bots": {
            "jF[A|;Jh(": {
                "id": "Ut",
                "hostUserId": "351",
                "allyTeam": "veniam sint qui",
                "team": "irure magna consectetur",
                "player": "ea in nulla",
                "name": null,
                "shortName": "occaecat quis irure Lorem Duis",
                "version": null,
                "options": null
            },
            "/}3kum,Mh!": {
                "id": "aute Duis commodo",
                "hostUserId": "351",
                "allyTeam": "laborum reprehenderit veniam nisi aute",
                "team": "est nulla",
                "player": "et",
                "name": null,
                "shortName": "commodo et incididunt",
                "version": null,
                "options": {
                    "N}E#D": "tempor",
                    "h+*": "labore"
                }
            },
            "n": {
                "id": "qui ad commodo voluptate aute",
                "hostUserId": "351",
                "player": "tempor",
                "version": null,
                "options": {
                    "}c3": null
                }
            }
        },
        "currentBattle": {
            "id": "laborum ullamco",
            "startedAt": 1705432698000000
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;
export type UnixTime = number;
export type VoteActions =
    | {
          type: "start";
      }
    | {
          type: "changeMap";
          newMapName: string;
      };

export interface LobbyUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/updated";
    data: LobbyUpdatedEventData;
}
export interface LobbyUpdatedEventData {
    id: string;
    name?: string;
    mapName?: string;
    engineVersion?: string;
    gameVersion?: string;
    allyTeamConfig?: {
        [k: string]: {
            startBox?: StartBox;
            maxTeams?: number;
            teams: {
                [k: string]: {
                    maxPlayers?: number;
                } | null;
            };
        } | null;
    };
    players?: {
        [k: string]: {
            id: UserId;
            allyTeam?: string;
            team?: string;
            player?: string;
        } | null;
    };
    spectators?: {
        [k: string]: {
            id: UserId;
            joinQueuePosition?: number | null;
        } | null;
    };
    bots?: {
        [k: string]: {
            id: string;
            hostUserId?: UserId;
            allyTeam?: string;
            team?: string;
            player?: string;
            name?: string | null;
            shortName?: string;
            version: string | null;
            options: {
                [k: string]: string | null;
            } | null;
        } | null;
    };
    currentBattle?: {
        id: string;
        startedAt: UnixTime;
    } | null;
    currentVote?: {
        id: string;
        action?: VoteActions | null;
        initiator?: UserId;
        voters?: {
            [k: string]: {
                vote: "pending" | "yes" | "no" | "abstain";
            };
        };
        until?: UnixTime;
    } | null;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
---

## VoteEnded

To let clients know a vote has finished and its outcome

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteEndedEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/voteEnded" },
        "data": {
            "title": "LobbyVoteEndedEventData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "outcome": {
                    "enum": ["passed", "failed", "cancelled", "timeout"]
                }
            },
            "required": ["id", "outcome"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "fugiat",
    "commandId": "lobby/voteEnded",
    "data": {
        "id": "Ut ullamco irure",
        "outcome": "passed"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteEndedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/voteEnded";
    data: LobbyVoteEndedEventData;
}
export interface LobbyVoteEndedEventData {
    id: string;
    outcome: "passed" | "failed" | "cancelled" | "timeout";
}
```
---

## VoteSubmit

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteSubmitRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "lobby/voteSubmit" },
        "data": {
            "title": "LobbyVoteSubmitRequestData",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "vote": { "enum": ["yes", "no", "abstain"] }
            },
            "required": ["id", "vote"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "in",
    "commandId": "lobby/voteSubmit",
    "data": {
        "id": "nisi esse",
        "vote": "abstain"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteSubmitRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/voteSubmit";
    data: LobbyVoteSubmitRequestData;
}
export interface LobbyVoteSubmitRequestData {
    id: string;
    vote: "yes" | "no" | "abstain";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "LobbyVoteSubmitResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "LobbyVoteSubmitOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/voteSubmit" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "LobbyVoteSubmitFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "lobby/voteSubmit" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "elit in Duis in",
    "commandId": "lobby/voteSubmit",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyVoteSubmitOkResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/voteSubmit";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

